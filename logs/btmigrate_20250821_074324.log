2025-08-21 07:43:24,187 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250821_074324.log
2025-08-21 07:43:24,187 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250821_074324.log
2025-08-21 07:43:24,188 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,283 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-21 07:43:24,284 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-21 07:43:24,285 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-21 07:43:24,286 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,388 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-21 07:43:24,388 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-21 07:43:24,389 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-21 07:43:24,390 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,445 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8873
2025-08-21 07:43:24,446 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-21 07:43:24,447 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,486 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-21 07:43:24,486 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-21 07:43:24,487 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-21 07:43:24,488 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,531 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 1951
2025-08-21 07:43:24,532 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-21 07:43:24,533 [INFO] ✅ UserGroup cache yüklendi. (6 kayıt)
2025-08-21 07:43:24,534 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,596 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2819
2025-08-21 07:43:24,596 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (8 kayıt)
2025-08-21 07:43:24,597 [INFO] ✅ User cache yüklendi. (8 kayıt)
2025-08-21 07:43:24,598 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-21 07:43:24,605 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-21 07:43:24,615 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-21 07:43:24,615 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-21 07:43:24,616 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,774 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-21 07:43:24,775 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-21 07:43:24,776 [INFO] Row 1: Managed System oluşturuldu.
2025-08-21 07:43:24,777 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:24,860 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-21 07:43:24,862 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,003 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-21 07:43:25,003 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-21 07:43:25,004 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:43:25,006 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,069 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/331/LinkedAccounts/185 HTTP/1.1" 201 1122
2025-08-21 07:43:25,069 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 331, AccountID: 185
2025-08-21 07:43:25,070 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:43:25,072 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,139 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-21 07:43:25,140 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-21 07:43:25,141 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-21 07:43:25,142 [INFO] 🚀 Application atama başlatıldı. (AccountID: 185)
2025-08-21 07:43:25,143 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,188 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/185/Applications HTTP/1.1" 200 2
2025-08-21 07:43:25,191 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,237 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/185/Applications/4 HTTP/1.1" 201 451
2025-08-21 07:43:25,237 [INFO] ✅ ApplicationID 4 → ManagedAccountID 185 ataması başarılı.
2025-08-21 07:43:25,238 [INFO] 📦 App atama özeti (AccountID:185) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-21 07:43:25,239 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-21 07:43:25,239 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}]}
2025-08-21 07:43:25,239 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-21 07:43:25,240 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,337 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-21 07:43:25,337 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 129)
2025-08-21 07:43:25,339 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,374 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/129/SmartRules HTTP/1.1" 405 73
2025-08-21 07:43:25,374 [ERROR] [UserGroupSR] Kod: 1 Message: ❌ SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:25,375 [ERROR] [UserGroup] Kod: 1 Message: [UserGroup] Kod: -863 Message: SR/Role ataması başarısız (step=smart_rule): SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:25,376 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=129
2025-08-21 07:43:25,377 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:43:25,377 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:43:25,378 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,496 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-21 07:43:25,497 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 78)
2025-08-21 07:43:25,498 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 78)
2025-08-21 07:43:25,499 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,548 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/78/UserGroups/129 HTTP/1.1" 201 271
2025-08-21 07:43:25,548 [INFO] ✅ Kullanıcı (ID: 78) gruba (ID: 129) başarıyla eklendi.
2025-08-21 07:43:25,549 [INFO] [Row 1] ➕ Kullanıcı (ID=78) gruba eklendi (GroupID=129)
2025-08-21 07:43:25,550 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:43:25,560 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-21 07:43:25,560 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-21 07:43:25,561 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,689 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-21 07:43:25,691 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-21 07:43:25,691 [INFO] Row 2: Managed System oluşturuldu.
2025-08-21 07:43:25,693 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,773 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:25,774 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:43:25,775 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,827 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/332/LinkedAccounts/185 HTTP/1.1" 201 1122
2025-08-21 07:43:25,827 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 332, AccountID: 185
2025-08-21 07:43:25,828 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:43:25,830 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,943 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10109/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:25,944 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:43:25,945 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:185).
2025-08-21 07:43:25,945 [INFO] [Row 2] ✅ User group mevcut: S_OZCAN (ID: 129)
2025-08-21 07:43:25,946 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:25,979 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/129/SmartRules HTTP/1.1" 405 73
2025-08-21 07:43:25,979 [ERROR] [UserGroupSR] Kod: 2 Message: ❌ SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:25,980 [ERROR] [UserGroup] Kod: 2 Message: [UserGroup] Kod: -861 Message: SR/Role ataması başarısız (step=smart_rule): SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:25,981 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=129
2025-08-21 07:43:25,981 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:43:25,981 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:43:25,981 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 78
2025-08-21 07:43:25,982 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,021 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/78/UserGroups/129 HTTP/1.1" 201 271
2025-08-21 07:43:26,022 [INFO] ✅ Kullanıcı (ID: 78) gruba (ID: 129) başarıyla eklendi.
2025-08-21 07:43:26,023 [INFO] [Row 2] ➕ Kullanıcı (ID=78) gruba eklendi (GroupID=129)
2025-08-21 07:43:26,024 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:43:26,033 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-21 07:43:26,033 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-21 07:43:26,034 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,200 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1018
2025-08-21 07:43:26,201 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-21 07:43:26,202 [INFO] Row 3: Managed System oluşturuldu.
2025-08-21 07:43:26,203 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,282 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:26,284 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:43:26,285 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,343 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/333/LinkedAccounts/185 HTTP/1.1" 201 1122
2025-08-21 07:43:26,343 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 333, AccountID: 185
2025-08-21 07:43:26,344 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:43:26,346 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,401 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10109/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:26,403 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:43:26,404 [INFO] 🚀 Application atama başlatıldı. (AccountID: 185)
2025-08-21 07:43:26,404 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,452 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/185/Applications HTTP/1.1" 200 453
2025-08-21 07:43:26,454 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-21 07:43:26,454 [INFO] 📦 App atama özeti (AccountID:185) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-21 07:43:26,454 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-21 07:43:26,454 [INFO] [Row 3] ✅ User group mevcut: S_OZCAN (ID: 129)
2025-08-21 07:43:26,455 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,486 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/129/SmartRules HTTP/1.1" 405 73
2025-08-21 07:43:26,487 [ERROR] [UserGroupSR] Kod: 3 Message: ❌ SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:26,488 [ERROR] [UserGroup] Kod: 3 Message: [UserGroup] Kod: -861 Message: SR/Role ataması başarısız (step=smart_rule): SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:26,489 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=129
2025-08-21 07:43:26,489 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:43:26,489 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:43:26,489 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 78
2025-08-21 07:43:26,490 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,530 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/78/UserGroups/129 HTTP/1.1" 201 271
2025-08-21 07:43:26,530 [INFO] ✅ Kullanıcı (ID: 78) gruba (ID: 129) başarıyla eklendi.
2025-08-21 07:43:26,531 [INFO] [Row 3] ➕ Kullanıcı (ID=78) gruba eklendi (GroupID=129)
2025-08-21 07:43:26,532 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:43:26,591 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-21 07:43:26,591 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-21 07:43:26,592 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,740 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-21 07:43:26,742 [INFO] Row 4: MSSQL Managed System oluşturuldu: None
2025-08-21 07:43:26,742 [INFO] Row 4: Managed System oluşturuldu.
2025-08-21 07:43:26,744 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,822 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:26,823 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:43:26,824 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,876 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/334/LinkedAccounts/185 HTTP/1.1" 201 1122
2025-08-21 07:43:26,876 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 334, AccountID: 185
2025-08-21 07:43:26,877 [INFO] Row 1: MSSQL managed account oluşturuldu: pam118064
2025-08-21 07:43:26,879 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,950 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10109/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:26,951 [INFO] Row 4: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:43:26,952 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:185).
2025-08-21 07:43:26,952 [INFO] [Row 4] ✅ User group mevcut: S_OZCAN (ID: 129)
2025-08-21 07:43:26,953 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:26,990 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/129/SmartRules HTTP/1.1" 405 73
2025-08-21 07:43:26,990 [ERROR] [UserGroupSR] Kod: 4 Message: ❌ SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:26,991 [ERROR] [UserGroup] Kod: 4 Message: [UserGroup] Kod: -861 Message: SR/Role ataması başarısız (step=smart_rule): SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/129/SmartRules
2025-08-21 07:43:27,000 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=129
2025-08-21 07:43:27,000 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:43:27,000 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:43:27,001 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 78
2025-08-21 07:43:27,001 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,040 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/78/UserGroups/129 HTTP/1.1" 201 271
2025-08-21 07:43:27,041 [INFO] ✅ Kullanıcı (ID: 78) gruba (ID: 129) başarıyla eklendi.
2025-08-21 07:43:27,042 [INFO] [Row 4] ➕ Kullanıcı (ID=78) gruba eklendi (GroupID=129)
2025-08-21 07:43:27,043 [INFO] Row 4: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:43:27,054 [DEBUG] [FA Lookup] Aranan → Domain: 'thynet.thy.com', OS: 'mssql'
2025-08-21 07:43:27,054 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-21 07:43:27,055 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,188 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-21 07:43:27,189 [INFO] Row 5: MSSQL Managed System oluşturuldu: None
2025-08-21 07:43:27,190 [INFO] Row 5: Managed System oluşturuldu.
2025-08-21 07:43:27,190 [ERROR] [MSSQLManagedAccount] Kod: 1 Message: [MSSQLManagedAccount] Kod: -423 Message: Domain controller bulunamadı. Domain: thynet.thy.com
2025-08-21 07:43:27,190 [ERROR] [Dispatcher] Kod: 1 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-21 07:43:27,203 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-21 07:43:27,203 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-21 07:43:27,204 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,339 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-21 07:43:27,341 [INFO] Row 6: Managed System oluşturuldu: None
2025-08-21 07:43:27,341 [INFO] Row 6: Managed System oluşturuldu.
2025-08-21 07:43:27,342 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,420 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-21 07:43:27,422 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,556 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-21 07:43:27,556 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-21 07:43:27,557 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-21 07:43:27,559 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,613 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/336/LinkedAccounts/186 HTTP/1.1" 201 1122
2025-08-21 07:43:27,613 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 336, AccountID: 186
2025-08-21 07:43:27,615 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-21 07:43:27,617 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,694 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 275
2025-08-21 07:43:27,695 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-21 07:43:27,696 [INFO] Row 6: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-21 07:43:27,697 [INFO] Row 6: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:186).
2025-08-21 07:43:27,697 [INFO] [Row 6] ✅ User group mevcut: Y_UCUNCUOGLU (ID: 128)
2025-08-21 07:43:27,698 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:43:27,731 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/128/SmartRules HTTP/1.1" 405 73
2025-08-21 07:43:27,731 [ERROR] [UserGroupSR] Kod: 6 Message: ❌ SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/128/SmartRules
2025-08-21 07:43:27,733 [ERROR] [UserGroup] Kod: 6 Message: [UserGroup] Kod: -861 Message: SR/Role ataması başarısız (step=smart_rule): SmartRule atama hatası: 405 Client Error: Method Not Allowed for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/128/SmartRules
2025-08-21 07:43:27,734 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=128
2025-08-21 07:43:27,734 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-21 07:43:27,734 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: []
2025-08-21 07:43:27,734 [INFO] [Row 6] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-21 07:43:27,749 [DEBUG] [FA Lookup] Aranan → Domain: '', OS: 'linux'
2025-08-21 07:43:27,749 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-21 07:43:27,750 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: '', OS: 'linux'
2025-08-21 07:43:27,750 [ERROR] [LinuxHandler] Kod: 7 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-21 07:43:27,750 [ERROR] [Dispatcher] Kod: 7 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-21 07:43:27,750 [ERROR] [ManagedAccountDispatcher] Kod: 2 Message: [ManagedAccountDispatcher] Kod: -199 Message: Dispatcher exception: 'float' object has no attribute 'lower'
