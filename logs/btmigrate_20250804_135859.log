2025-08-04 13:58:59,701 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250804_135859.log
2025-08-04 13:58:59,701 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250804_135859.log
2025-08-04 13:58:59,702 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:58:59,783 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-04 13:58:59,783 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-04 13:58:59,784 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-04 13:58:59,785 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:58:59,871 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-04 13:58:59,872 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-04 13:58:59,873 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-04 13:58:59,874 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:58:59,913 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8875
2025-08-04 13:58:59,914 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-04 13:58:59,915 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:58:59,939 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-04 13:58:59,939 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-04 13:58:59,940 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-04 13:58:59,941 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:58:59,967 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 977
2025-08-04 13:58:59,967 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (3 kayıt)
2025-08-04 13:58:59,968 [INFO] ✅ UserGroup cache yüklendi. (3 kayıt)
2025-08-04 13:58:59,969 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,007 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2091
2025-08-04 13:59:00,007 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-04 13:59:00,008 [INFO] ✅ User cache yüklendi. (6 kayıt)
2025-08-04 13:59:00,009 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-04 13:59:00,016 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-04 13:59:00,026 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.com', OS: 'linux'
2025-08-04 13:59:00,026 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 7
2025-08-04 13:59:00,027 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,182 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1006
2025-08-04 13:59:00,183 [INFO] Row 1: ✅ Linux Managed System oluşturuldu: None
2025-08-04 13:59:00,184 [DEBUG] [Row 1] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.com, Username: pam118064
2025-08-04 13:59:00,184 [DEBUG] [Row 1] 💾 Cache'ten alınan managed systems: 5 kayıt
2025-08-04 13:59:00,184 [ERROR] [ADManagedAccount] Kod: 1 Message: ❌ Domain controller bulunamadı. Domain: quasys.com
2025-08-04 13:59:00,192 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-04 13:59:00,193 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-04 13:59:00,193 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,339 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1011
2025-08-04 13:59:00,340 [INFO] Row 2: ✅ Managed System oluşturuldu: None
2025-08-04 13:59:00,341 [DEBUG] [Row 1] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam118065
2025-08-04 13:59:00,341 [DEBUG] [Row 1] 💾 Cache'ten alınan managed systems: 6 kayıt
2025-08-04 13:59:00,342 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,409 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1153
2025-08-04 13:59:00,411 [DEBUG] [Row 1] 🔄 Mevcut managed account sayısı: 1
2025-08-04 13:59:00,411 [DEBUG] [Row 1] 📦 Payload hazırlandı: {'DomainName': 'quasys.local', 'AccountName': 'pam118065', 'DistinguishedName': 'None', 'PasswordRuleID': 0, 'Password': 'QWEQWEQWE', 'WorkgroupID': 2, 'ObjectID': 'None', 'UserPrincipalName': 'pam118065', 'SAMAccountName': 'pam118065', 'AutoManagementFlag': False}
2025-08-04 13:59:00,411 [INFO] [Row 1] 🚀 AD managed account oluşturuluyor: pam118065
2025-08-04 13:59:00,412 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,531 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-04 13:59:00,531 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118065
2025-08-04 13:59:00,532 [INFO] [Row 1] 🔗 Linkleme işlemi başlatıldı → SystemID: 211, AccountID: 119
2025-08-04 13:59:00,533 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,576 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/211/LinkedAccounts/119 HTTP/1.1" 201 1123
2025-08-04 13:59:00,577 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 211, AccountID: 119
2025-08-04 13:59:00,579 [DEBUG] [Row 1] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-04 13:59:00,579 [DEBUG] [Row 1] 📦 Smart Rule payload: {'IDs': [119], 'Title': 'THY_MA_E_PEKDAS', 'Category': 'Quick Rules', 'Description': 'Quick Rule for Safe name', 'RuleType': 'ManagedAccount'}
2025-08-04 13:59:00,580 [INFO] [Row 1] 🚀 Smart Rule oluşturuluyor: THY_MA_E_PEKDAS
2025-08-04 13:59:00,581 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,686 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 267
2025-08-04 13:59:00,687 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_PEKDAS
2025-08-04 13:59:00,688 [INFO] [Row 1] ✅ Smart Rule başarıyla oluşturuldu: THY_MA_E_PEKDAS
2025-08-04 13:59:00,689 [INFO] 🚀 Application atama başlatıldı. (AccountID: 119)
2025-08-04 13:59:00,689 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_PEKDAS', 'description': 'E_PEKDAS', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10057, 'AccessLevelID': 3}]}
2025-08-04 13:59:00,689 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: E_PEKDAS
2025-08-04 13:59:00,689 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,784 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 273
2025-08-04 13:59:00,784 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 101, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_PEKDAS', 'DistinguishedName': None, 'Description': 'E_PEKDAS', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-04 13:59:00,785 [INFO] ✅ User group oluşturuldu: E_PEKDAS (ID: 101)
2025-08-04 13:59:00,787 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,841 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/101/SmartRules/10057/Roles HTTP/1.1" 204 0
2025-08-04 13:59:00,841 [INFO] [Row 1] ✅ SmartRule Role ataması başarılı → GroupID=101, RuleID=10057
2025-08-04 13:59:00,843 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: E_PEKDAS (Tip: <class 'str'>) → GroupID=101
2025-08-04 13:59:00,843 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_PEKDAS
2025-08-04 13:59:00,843 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['e_pekdas']
2025-08-04 13:59:00,844 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,928 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 214
2025-08-04 13:59:00,929 [INFO] ✅ Kullanıcı oluşturuldu: e_pekdas (ID: 53)
2025-08-04 13:59:00,930 [INFO] ✅ Yeni kullanıcı cache'e eklendi: e_pekdas (ID: 53)
2025-08-04 13:59:00,931 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:00,967 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/53/UserGroups/101 HTTP/1.1" 201 273
2025-08-04 13:59:00,968 [INFO] ✅ Kullanıcı (ID: 53) gruba (ID: 101) başarıyla eklendi.
2025-08-04 13:59:00,969 [INFO] [Row 1] ➕ Kullanıcı (ID=53) gruba eklendi (GroupID=101)
2025-08-04 13:59:00,979 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-04 13:59:00,979 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-04 13:59:00,980 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,118 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1123
2025-08-04 13:59:01,120 [INFO] Row 3: ✅ MSSQL Managed System oluşturuldu: None
2025-08-04 13:59:01,120 [DEBUG] [Row 1] 🔍 MSSQL Managed Account işlemi başlatıldı. IP: 10.59.76.112, Username: pam118064
2025-08-04 13:59:01,120 [DEBUG] [Row 1] 🆔 Bulunan managed system ID: 212
2025-08-04 13:59:01,121 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,237 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/212/ManagedAccounts HTTP/1.1" 200 2
2025-08-04 13:59:01,238 [DEBUG] [Row 1] 📦 Payload hazırlandı: {'AccountName': 'pam118064', 'Password': 'QWEQWEQWE', 'PasswordRuleID': 0, 'WorkgroupID': 2, 'Port': 1433, 'UseOwnCredentials': True, 'AutoManagementFlag': False}
2025-08-04 13:59:01,239 [INFO] [Row 1] 🚀 MSSQL managed account oluşturuluyor: pam118064
2025-08-04 13:59:01,240 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,402 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/212/ManagedAccounts HTTP/1.1" 201 1100
2025-08-04 13:59:01,402 [INFO] [ManagedAccountAPI] ✅ MSSQL Managed Account oluşturuldu: pam118064
2025-08-04 13:59:01,405 [DEBUG] [Row 1] 🔍 Smart Rule adı oluşturuldu: THY_MA_S_OZCAN
2025-08-04 13:59:01,405 [DEBUG] [Row 1] 📦 Smart Rule payload: {'IDs': [120], 'Title': 'THY_MA_S_OZCAN', 'Category': 'Quick Rules', 'Description': 'Quick Rule for Safe name', 'RuleType': 'ManagedAccount'}
2025-08-04 13:59:01,405 [INFO] [Row 1] 🚀 Smart Rule oluşturuluyor: THY_MA_S_OZCAN
2025-08-04 13:59:01,406 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,463 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 267
2025-08-04 13:59:01,464 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-04 13:59:01,465 [INFO] [Row 1] ✅ Smart Rule başarıyla oluşturuldu: THY_MA_S_OZCAN
2025-08-04 13:59:01,466 [INFO] 🚀 Application atama başlatıldı. (AccountID: 120)
2025-08-04 13:59:01,466 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,496 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/120/Applications HTTP/1.1" 200 2
2025-08-04 13:59:01,498 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,533 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/120/Applications/3 HTTP/1.1" 201 447
2025-08-04 13:59:01,534 [INFO] ✅ ApplicationID 3 → ManagedAccountID 120 ataması başarılı.
2025-08-04 13:59:01,535 [INFO] ✅ Application 'mssql' başarıyla atandı (ID: 3).
2025-08-04 13:59:01,535 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10058, 'AccessLevelID': 3}]}
2025-08-04 13:59:01,535 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-04 13:59:01,536 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,628 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-04 13:59:01,628 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 102, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-04 13:59:01,628 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 102)
2025-08-04 13:59:01,630 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,684 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/102/SmartRules/10058/Roles HTTP/1.1" 204 0
2025-08-04 13:59:01,685 [INFO] [Row 1] ✅ SmartRule Role ataması başarılı → GroupID=102, RuleID=10058
2025-08-04 13:59:01,687 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN,E_PEKDAS (Tip: <class 'str'>) → GroupID=102
2025-08-04 13:59:01,687 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN,E_PEKDAS
2025-08-04 13:59:01,687 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan', 'e_pekdas']
2025-08-04 13:59:01,688 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,751 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-04 13:59:01,752 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 54)
2025-08-04 13:59:01,753 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 54)
2025-08-04 13:59:01,753 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: e_pekdas → ID: 53
2025-08-04 13:59:01,754 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,789 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/54/UserGroups/102 HTTP/1.1" 201 271
2025-08-04 13:59:01,789 [INFO] ✅ Kullanıcı (ID: 54) gruba (ID: 102) başarıyla eklendi.
2025-08-04 13:59:01,790 [INFO] [Row 1] ➕ Kullanıcı (ID=54) gruba eklendi (GroupID=102)
2025-08-04 13:59:01,792 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,827 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/53/UserGroups/102 HTTP/1.1" 201 271
2025-08-04 13:59:01,827 [INFO] ✅ Kullanıcı (ID: 53) gruba (ID: 102) başarıyla eklendi.
2025-08-04 13:59:01,828 [INFO] [Row 1] ➕ Kullanıcı (ID=53) gruba eklendi (GroupID=102)
2025-08-04 13:59:01,839 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-04 13:59:01,839 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-04 13:59:01,839 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:01,995 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1011
2025-08-04 13:59:01,996 [INFO] Row 4: ✅ Managed System oluşturuldu: None
2025-08-04 13:59:01,997 [DEBUG] [Row 2] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100887
2025-08-04 13:59:01,997 [DEBUG] [Row 2] 💾 Cache'ten alınan managed systems: 8 kayıt
2025-08-04 13:59:01,997 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,064 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2277
2025-08-04 13:59:02,066 [DEBUG] [Row 2] 🔄 Mevcut managed account sayısı: 2
2025-08-04 13:59:02,066 [DEBUG] [Row 2] 📦 Payload hazırlandı: {'DomainName': 'quasys.local', 'AccountName': 'pam100887', 'DistinguishedName': 'None', 'PasswordRuleID': 0, 'Password': 'QWEQWEQWE', 'WorkgroupID': 2, 'ObjectID': 'None', 'UserPrincipalName': 'pam100887', 'SAMAccountName': 'pam100887', 'AutoManagementFlag': False}
2025-08-04 13:59:02,066 [INFO] [Row 2] 🚀 AD managed account oluşturuluyor: pam100887
2025-08-04 13:59:02,067 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,209 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-04 13:59:02,210 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-04 13:59:02,211 [INFO] [Row 2] 🔗 Linkleme işlemi başlatıldı → SystemID: 213, AccountID: 121
2025-08-04 13:59:02,212 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,253 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/213/LinkedAccounts/121 HTTP/1.1" 201 1123
2025-08-04 13:59:02,253 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 213, AccountID: 121
2025-08-04 13:59:02,255 [DEBUG] [Row 2] 🔍 Smart Rule adı oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-04 13:59:02,255 [DEBUG] [Row 2] 📦 Smart Rule payload: {'IDs': [121], 'Title': 'THY_MA_Y_UCUNCUOGLU', 'Category': 'Quick Rules', 'Description': 'Quick Rule for Safe name', 'RuleType': 'ManagedAccount'}
2025-08-04 13:59:02,255 [INFO] [Row 2] 🚀 Smart Rule oluşturuluyor: THY_MA_Y_UCUNCUOGLU
2025-08-04 13:59:02,256 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,364 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 272
2025-08-04 13:59:02,364 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-04 13:59:02,366 [INFO] [Row 2] ✅ Smart Rule başarıyla oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-04 13:59:02,366 [INFO] 🚀 Application atama başlatıldı. (AccountID: 121)
2025-08-04 13:59:02,366 [DEBUG] [Row 2] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'Y_UCUNCUOGLU', 'description': 'Y_UCUNCUOGLU', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10059, 'AccessLevelID': 3}]}
2025-08-04 13:59:02,366 [INFO] [Row 2] 🚀 Yeni user group oluşturuluyor: Y_UCUNCUOGLU
2025-08-04 13:59:02,367 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,463 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 281
2025-08-04 13:59:02,464 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 103, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'Y_UCUNCUOGLU', 'DistinguishedName': None, 'Description': 'Y_UCUNCUOGLU', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-04 13:59:02,464 [INFO] ✅ User group oluşturuldu: Y_UCUNCUOGLU (ID: 103)
2025-08-04 13:59:02,466 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,541 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/103/SmartRules/10059/Roles HTTP/1.1" 204 0
2025-08-04 13:59:02,542 [INFO] [Row 2] ✅ SmartRule Role ataması başarılı → GroupID=103, RuleID=10059
2025-08-04 13:59:02,543 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: Y_UCUNCUOGLU (Tip: <class 'str'>) → GroupID=103
2025-08-04 13:59:02,543 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: Y_UCUNCUOGLU
2025-08-04 13:59:02,543 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['y_ucuncuoglu']
2025-08-04 13:59:02,544 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,609 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 223
2025-08-04 13:59:02,609 [INFO] ✅ Kullanıcı oluşturuldu: y_ucuncuoglu (ID: 55)
2025-08-04 13:59:02,611 [INFO] ✅ Yeni kullanıcı cache'e eklendi: y_ucuncuoglu (ID: 55)
2025-08-04 13:59:02,612 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,650 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/55/UserGroups/103 HTTP/1.1" 201 281
2025-08-04 13:59:02,651 [INFO] ✅ Kullanıcı (ID: 55) gruba (ID: 103) başarıyla eklendi.
2025-08-04 13:59:02,652 [INFO] [Row 2] ➕ Kullanıcı (ID=55) gruba eklendi (GroupID=103)
2025-08-04 13:59:02,664 [INFO] Row 5: ✅ Zaten mevcut → None
2025-08-04 13:59:02,664 [DEBUG] [Row 2] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100888
2025-08-04 13:59:02,664 [DEBUG] [Row 2] 💾 Cache'ten alınan managed systems: 8 kayıt
2025-08-04 13:59:02,665 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,734 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 3401
2025-08-04 13:59:02,736 [DEBUG] [Row 2] 🔄 Mevcut managed account sayısı: 3
2025-08-04 13:59:02,736 [DEBUG] [Row 2] 📦 Payload hazırlandı: {'DomainName': 'quasys.local', 'AccountName': 'pam100888', 'DistinguishedName': 'None', 'PasswordRuleID': 0, 'Password': 'QWEQWEQWE', 'WorkgroupID': 2, 'ObjectID': 'None', 'UserPrincipalName': 'pam100888', 'SAMAccountName': 'pam100888', 'AutoManagementFlag': False}
2025-08-04 13:59:02,736 [INFO] [Row 2] 🚀 AD managed account oluşturuluyor: pam100888
2025-08-04 13:59:02,737 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,857 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-04 13:59:02,857 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100888
2025-08-04 13:59:02,858 [INFO] [Row 2] 🔗 Linkleme işlemi başlatıldı → SystemID: 211, AccountID: 122
2025-08-04 13:59:02,860 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,904 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/211/LinkedAccounts/122 HTTP/1.1" 201 1123
2025-08-04 13:59:02,905 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 211, AccountID: 122
2025-08-04 13:59:02,907 [DEBUG] [Row 2] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_YARDIMCI
2025-08-04 13:59:02,907 [DEBUG] [Row 2] 📦 Smart Rule payload: {'IDs': [122], 'Title': 'THY_MA_E_YARDIMCI', 'Category': 'Quick Rules', 'Description': 'Quick Rule for Safe name', 'RuleType': 'ManagedAccount'}
2025-08-04 13:59:02,907 [INFO] [Row 2] 🚀 Smart Rule oluşturuluyor: THY_MA_E_YARDIMCI
2025-08-04 13:59:02,908 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:02,966 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 270
2025-08-04 13:59:02,966 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_YARDIMCI
2025-08-04 13:59:02,968 [INFO] [Row 2] ✅ Smart Rule başarıyla oluşturuldu: THY_MA_E_YARDIMCI
2025-08-04 13:59:02,968 [INFO] 🚀 Application atama başlatıldı. (AccountID: 122)
2025-08-04 13:59:02,968 [DEBUG] [Row 2] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_YARDIMCI', 'description': 'E_YARDIMCI', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10060, 'AccessLevelID': 3}]}
2025-08-04 13:59:02,968 [INFO] [Row 2] 🚀 Yeni user group oluşturuluyor: E_YARDIMCI
2025-08-04 13:59:02,969 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,064 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 277
2025-08-04 13:59:03,065 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 104, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_YARDIMCI', 'DistinguishedName': None, 'Description': 'E_YARDIMCI', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-04 13:59:03,065 [INFO] ✅ User group oluşturuldu: E_YARDIMCI (ID: 104)
2025-08-04 13:59:03,067 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,133 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/104/SmartRules/10060/Roles HTTP/1.1" 204 0
2025-08-04 13:59:03,133 [INFO] [Row 2] ✅ SmartRule Role ataması başarılı → GroupID=104, RuleID=10060
2025-08-04 13:59:03,135 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: E_YARDIMCI (Tip: <class 'str'>) → GroupID=104
2025-08-04 13:59:03,135 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_YARDIMCI
2025-08-04 13:59:03,135 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['e_yardimci']
2025-08-04 13:59:03,136 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,196 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 218
2025-08-04 13:59:03,196 [INFO] ✅ Kullanıcı oluşturuldu: e_yardimci (ID: 56)
2025-08-04 13:59:03,197 [INFO] ✅ Yeni kullanıcı cache'e eklendi: e_yardimci (ID: 56)
2025-08-04 13:59:03,198 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,235 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/56/UserGroups/104 HTTP/1.1" 201 277
2025-08-04 13:59:03,235 [INFO] ✅ Kullanıcı (ID: 56) gruba (ID: 104) başarıyla eklendi.
2025-08-04 13:59:03,237 [INFO] [Row 2] ➕ Kullanıcı (ID=56) gruba eklendi (GroupID=104)
2025-08-04 13:59:03,248 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'oracle'
2025-08-04 13:59:03,248 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-04 13:59:03,248 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-04 13:59:03,249 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,407 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1072
2025-08-04 13:59:03,409 [INFO] Row 6: ✅ Oracle Managed System oluşturuldu: None
2025-08-04 13:59:03,409 [DEBUG] [Row 3] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: PAM100545
2025-08-04 13:59:03,409 [DEBUG] [Row 3] 🆔 Bulunan managed system ID: 214
2025-08-04 13:59:03,410 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,504 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/214/ManagedAccounts HTTP/1.1" 200 2
2025-08-04 13:59:03,506 [DEBUG] [Row 3] 📦 Payload hazırlandı: {'AccountName': 'PAM100545', 'Password': 'QWEQWEQWE', 'PasswordRuleID': 0, 'WorkgroupID': 2, 'Port': 1453, 'UseOwnCredentials': True, 'AutoManagementFlag': False}
2025-08-04 13:59:03,506 [INFO] [Row 3] 🚀 Oracle managed account oluşturuluyor: PAM100545
2025-08-04 13:59:03,507 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,623 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/214/ManagedAccounts HTTP/1.1" 201 1100
2025-08-04 13:59:03,623 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100545
2025-08-04 13:59:03,625 [DEBUG] [Row 3] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_MISIR
2025-08-04 13:59:03,625 [DEBUG] [Row 3] 📦 Smart Rule payload: {'IDs': [123], 'Title': 'THY_MA_E_MISIR', 'Category': 'Quick Rules', 'Description': 'Quick Rule for Safe name', 'RuleType': 'ManagedAccount'}
2025-08-04 13:59:03,625 [INFO] [Row 3] 🚀 Smart Rule oluşturuluyor: THY_MA_E_MISIR
2025-08-04 13:59:03,626 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,682 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 267
2025-08-04 13:59:03,683 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_MISIR
2025-08-04 13:59:03,684 [INFO] [Row 3] ✅ Smart Rule başarıyla oluşturuldu: THY_MA_E_MISIR
2025-08-04 13:59:03,685 [INFO] 🚀 Application atama başlatıldı. (AccountID: 123)
2025-08-04 13:59:03,686 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,715 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/123/Applications HTTP/1.1" 200 2
2025-08-04 13:59:03,717 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,748 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/123/Applications/6 HTTP/1.1" 201 285
2025-08-04 13:59:03,749 [INFO] ✅ ApplicationID 6 → ManagedAccountID 123 ataması başarılı.
2025-08-04 13:59:03,750 [INFO] ✅ Application 'oracle' başarıyla atandı (ID: 6).
2025-08-04 13:59:03,751 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,778 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/123/Applications HTTP/1.1" 200 287
2025-08-04 13:59:03,780 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,811 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/123/Applications/4 HTTP/1.1" 201 451
2025-08-04 13:59:03,812 [INFO] ✅ ApplicationID 4 → ManagedAccountID 123 ataması başarılı.
2025-08-04 13:59:03,813 [INFO] ✅ Application 'winscp' başarıyla atandı (ID: 4).
2025-08-04 13:59:03,813 [DEBUG] [Row 3] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_MISIR', 'description': 'E_MISIR', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10061, 'AccessLevelID': 3}]}
2025-08-04 13:59:03,814 [INFO] [Row 3] 🚀 Yeni user group oluşturuluyor: E_MISIR
2025-08-04 13:59:03,814 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,910 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-04 13:59:03,911 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 105, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_MISIR', 'DistinguishedName': None, 'Description': 'E_MISIR', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-04 13:59:03,911 [INFO] ✅ User group oluşturuldu: E_MISIR (ID: 105)
2025-08-04 13:59:03,913 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:03,967 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/105/SmartRules/10061/Roles HTTP/1.1" 204 0
2025-08-04 13:59:03,967 [INFO] [Row 3] ✅ SmartRule Role ataması başarılı → GroupID=105, RuleID=10061
2025-08-04 13:59:03,969 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: E_MISIR (Tip: <class 'str'>) → GroupID=105
2025-08-04 13:59:03,969 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_MISIR
2025-08-04 13:59:03,969 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['e_misir']
2025-08-04 13:59:03,970 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,028 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 212
2025-08-04 13:59:04,029 [INFO] ✅ Kullanıcı oluşturuldu: e_misir (ID: 57)
2025-08-04 13:59:04,030 [INFO] ✅ Yeni kullanıcı cache'e eklendi: e_misir (ID: 57)
2025-08-04 13:59:04,031 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,069 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/57/UserGroups/105 HTTP/1.1" 201 271
2025-08-04 13:59:04,069 [INFO] ✅ Kullanıcı (ID: 57) gruba (ID: 105) başarıyla eklendi.
2025-08-04 13:59:04,070 [INFO] [Row 3] ➕ Kullanıcı (ID=57) gruba eklendi (GroupID=105)
2025-08-04 13:59:04,081 [INFO] Row 7: ✅ Zaten mevcut → None
2025-08-04 13:59:04,082 [INFO] [Row 3] ℹ️ Oracle atlandı: 'pam' ile başlamayan kullanıcı → admin
2025-08-04 13:59:04,091 [INFO] Row 8: ✅ Zaten mevcut → None
2025-08-04 13:59:04,092 [DEBUG] [Row 4] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100887
2025-08-04 13:59:04,092 [DEBUG] [Row 4] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-04 13:59:04,094 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,161 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4525
2025-08-04 13:59:04,163 [DEBUG] [Row 4] 🔄 Mevcut managed account sayısı: 4
2025-08-04 13:59:04,163 [INFO] [Row 4] ✅ AD managed account zaten var: pam100887
2025-08-04 13:59:04,163 [INFO] [Row 4] 🔗 Linkleme işlemi başlatıldı → SystemID: 213, AccountID: 121
2025-08-04 13:59:04,164 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,198 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/213/LinkedAccounts/121 HTTP/1.1" 200 1123
2025-08-04 13:59:04,199 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 213, AccountID: 121
2025-08-04 13:59:04,201 [DEBUG] [Row 4] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-04 13:59:04,201 [INFO] [Row 4] ✅ Smart Rule zaten mevcut: THY_MA_E_PEKDAS (ID: 10057)
2025-08-04 13:59:04,202 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,285 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10057/ManagedAccounts HTTP/1.1" 200 1125
2025-08-04 13:59:04,288 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,450 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10057/ManagedAccounts HTTP/1.1" 200 2249
2025-08-04 13:59:04,451 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10057, AccountIDs=[121, 119]
2025-08-04 13:59:04,452 [INFO] [Row 4] 📎 Smart Rule account listesi güncellendi: [119, 121]
2025-08-04 13:59:04,453 [INFO] 🚀 Application atama başlatıldı. (AccountID: 121)
2025-08-04 13:59:04,453 [INFO] [Row 4] ✅ User group zaten mevcut: E_PEKDAS
2025-08-04 13:59:04,453 [INFO] [Row 4] 🔍 UserGroupID: 101
2025-08-04 13:59:04,454 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,501 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/101/SmartRules/10057/Roles HTTP/1.1" 204 0
2025-08-04 13:59:04,502 [INFO] [Row 4] ✅ SmartRule Role ataması başarılı → GroupID=101, RuleID=10057
2025-08-04 13:59:04,504 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: E_PEKDAS (Tip: <class 'str'>) → GroupID=101
2025-08-04 13:59:04,504 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_PEKDAS
2025-08-04 13:59:04,504 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['e_pekdas']
2025-08-04 13:59:04,504 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: e_pekdas → ID: 53
2025-08-04 13:59:04,505 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,532 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/53/UserGroups/101 HTTP/1.1" 201 273
2025-08-04 13:59:04,532 [INFO] ✅ Kullanıcı (ID: 53) gruba (ID: 101) başarıyla eklendi.
2025-08-04 13:59:04,534 [INFO] [Row 4] ➕ Kullanıcı (ID=53) gruba eklendi (GroupID=101)
2025-08-04 13:59:04,546 [INFO] Row 9: ✅ Zaten mevcut → None
2025-08-04 13:59:04,546 [DEBUG] [Row 4] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100888
2025-08-04 13:59:04,546 [DEBUG] [Row 4] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-04 13:59:04,547 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,615 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4525
2025-08-04 13:59:04,616 [DEBUG] [Row 4] 🔄 Mevcut managed account sayısı: 4
2025-08-04 13:59:04,616 [INFO] [Row 4] ✅ AD managed account zaten var: pam100888
2025-08-04 13:59:04,617 [INFO] [Row 4] 🔗 Linkleme işlemi başlatıldı → SystemID: 211, AccountID: 122
2025-08-04 13:59:04,617 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,653 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/211/LinkedAccounts/122 HTTP/1.1" 200 1123
2025-08-04 13:59:04,653 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 211, AccountID: 122
2025-08-04 13:59:04,655 [DEBUG] [Row 4] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_YARDIMCI
2025-08-04 13:59:04,655 [INFO] [Row 4] ✅ Smart Rule zaten mevcut: THY_MA_E_YARDIMCI (ID: 10060)
2025-08-04 13:59:04,656 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,735 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10060/ManagedAccounts HTTP/1.1" 200 1125
2025-08-04 13:59:04,737 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,866 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10060/ManagedAccounts HTTP/1.1" 200 1125
2025-08-04 13:59:04,866 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10060, AccountIDs=[122]
2025-08-04 13:59:04,867 [INFO] [Row 4] 📎 Smart Rule account listesi güncellendi: [122, 122]
2025-08-04 13:59:04,868 [INFO] 🚀 Application atama başlatıldı. (AccountID: 122)
2025-08-04 13:59:04,868 [INFO] [Row 4] ✅ User group zaten mevcut: E_YARDIMCI
2025-08-04 13:59:04,869 [INFO] [Row 4] 🔍 UserGroupID: 104
2025-08-04 13:59:04,869 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,966 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/104/SmartRules/10060/Roles HTTP/1.1" 204 0
2025-08-04 13:59:04,967 [INFO] [Row 4] ✅ SmartRule Role ataması başarılı → GroupID=104, RuleID=10060
2025-08-04 13:59:04,968 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: E_YARDIMCI (Tip: <class 'str'>) → GroupID=104
2025-08-04 13:59:04,969 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_YARDIMCI
2025-08-04 13:59:04,969 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['e_yardimci']
2025-08-04 13:59:04,969 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: e_yardimci → ID: 56
2025-08-04 13:59:04,970 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:04,997 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/56/UserGroups/104 HTTP/1.1" 201 277
2025-08-04 13:59:04,998 [INFO] ✅ Kullanıcı (ID: 56) gruba (ID: 104) başarıyla eklendi.
2025-08-04 13:59:04,998 [INFO] [Row 4] ➕ Kullanıcı (ID=56) gruba eklendi (GroupID=104)
2025-08-04 13:59:05,012 [INFO] Row 10: ✅ Zaten mevcut → None
2025-08-04 13:59:05,013 [DEBUG] [Row 5] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: PAM100545
2025-08-04 13:59:05,013 [DEBUG] [Row 5] 🆔 Bulunan managed system ID: 214
2025-08-04 13:59:05,014 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,112 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/214/ManagedAccounts HTTP/1.1" 200 1102
2025-08-04 13:59:05,116 [INFO] [Row 5] ✅ Oracle managed account zaten var: PAM100545
2025-08-04 13:59:05,117 [DEBUG] [Row 5] 🔍 Smart Rule adı oluşturuldu: THY_MA_S_OZCAN
2025-08-04 13:59:05,117 [INFO] [Row 5] ✅ Smart Rule zaten mevcut: THY_MA_S_OZCAN (ID: 10058)
2025-08-04 13:59:05,118 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,200 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10058/ManagedAccounts HTTP/1.1" 200 1102
2025-08-04 13:59:05,202 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,308 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10058/ManagedAccounts HTTP/1.1" 200 2203
2025-08-04 13:59:05,309 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10058, AccountIDs=[120, 123]
2025-08-04 13:59:05,310 [INFO] [Row 5] 📎 Smart Rule account listesi güncellendi: [120, 123]
2025-08-04 13:59:05,311 [INFO] 🚀 Application atama başlatıldı. (AccountID: 123)
2025-08-04 13:59:05,312 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,340 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/123/Applications HTTP/1.1" 200 739
2025-08-04 13:59:05,341 [INFO] ⚠️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-04 13:59:05,342 [INFO] [Row 5] ✅ User group zaten mevcut: S_OZCAN
2025-08-04 13:59:05,342 [INFO] [Row 5] 🔍 UserGroupID: 102
2025-08-04 13:59:05,343 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,443 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/102/SmartRules/10058/Roles HTTP/1.1" 204 0
2025-08-04 13:59:05,444 [INFO] [Row 5] ✅ SmartRule Role ataması başarılı → GroupID=102, RuleID=10058
2025-08-04 13:59:05,445 [DEBUG] [DEBUG] Row 5: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=102
2025-08-04 13:59:05,445 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-04 13:59:05,446 [DEBUG] [DEBUG] Row 5: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-04 13:59:05,446 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 54
2025-08-04 13:59:05,446 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,476 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/54/UserGroups/102 HTTP/1.1" 201 271
2025-08-04 13:59:05,476 [INFO] ✅ Kullanıcı (ID: 54) gruba (ID: 102) başarıyla eklendi.
2025-08-04 13:59:05,477 [INFO] [Row 5] ➕ Kullanıcı (ID=54) gruba eklendi (GroupID=102)
2025-08-04 13:59:05,492 [INFO] Row 11: ✅ Zaten mevcut → None
2025-08-04 13:59:05,492 [DEBUG] [Row 5] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: pam100888
2025-08-04 13:59:05,492 [DEBUG] [Row 5] 🆔 Bulunan managed system ID: 214
2025-08-04 13:59:05,493 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,565 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/214/ManagedAccounts HTTP/1.1" 200 1102
2025-08-04 13:59:05,566 [DEBUG] [Row 5] 📦 Payload hazırlandı: {'AccountName': 'pam100888', 'Password': 'QWEQWEQWE', 'PasswordRuleID': 0, 'WorkgroupID': 2, 'Port': 1453, 'UseOwnCredentials': True, 'AutoManagementFlag': False}
2025-08-04 13:59:05,566 [INFO] [Row 5] 🚀 Oracle managed account oluşturuluyor: pam100888
2025-08-04 13:59:05,567 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,690 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/214/ManagedAccounts HTTP/1.1" 201 1101
2025-08-04 13:59:05,691 [INFO] ✅ Oracle Managed Account oluşturuldu: pam100888
2025-08-04 13:59:05,693 [DEBUG] [Row 5] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-04 13:59:05,693 [INFO] [Row 5] ✅ Smart Rule zaten mevcut: THY_MA_E_PEKDAS (ID: 10057)
2025-08-04 13:59:05,695 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,742 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10057/ManagedAccounts HTTP/1.1" 200 2249
2025-08-04 13:59:05,744 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,887 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10057/ManagedAccounts HTTP/1.1" 200 3351
2025-08-04 13:59:05,887 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10057, AccountIDs=[121, 124, 119]
2025-08-04 13:59:05,888 [INFO] [Row 5] 📎 Smart Rule account listesi güncellendi: [119, 121, 124]
2025-08-04 13:59:05,889 [INFO] 🚀 Application atama başlatıldı. (AccountID: 124)
2025-08-04 13:59:05,890 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,923 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/124/Applications HTTP/1.1" 200 2
2025-08-04 13:59:05,925 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:05,962 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/124/Applications/6 HTTP/1.1" 201 285
2025-08-04 13:59:05,963 [INFO] ✅ ApplicationID 6 → ManagedAccountID 124 ataması başarılı.
2025-08-04 13:59:05,964 [INFO] ✅ Application 'oracle' başarıyla atandı (ID: 6).
2025-08-04 13:59:05,964 [INFO] [Row 5] ✅ User group zaten mevcut: E_PEKDAS
2025-08-04 13:59:05,964 [INFO] [Row 5] 🔍 UserGroupID: 101
2025-08-04 13:59:05,965 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:06,017 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/101/SmartRules/10057/Roles HTTP/1.1" 204 0
2025-08-04 13:59:06,017 [INFO] [Row 5] ✅ SmartRule Role ataması başarılı → GroupID=101, RuleID=10057
2025-08-04 13:59:06,019 [DEBUG] [DEBUG] Row 5: ➡️ Girdi üyeleri: E_PEKDAS (Tip: <class 'str'>) → GroupID=101
2025-08-04 13:59:06,019 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_PEKDAS
2025-08-04 13:59:06,019 [DEBUG] [DEBUG] Row 5: 🧪 Normalize üyeler: ['e_pekdas']
2025-08-04 13:59:06,019 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: e_pekdas → ID: 53
2025-08-04 13:59:06,020 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-04 13:59:06,046 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/53/UserGroups/101 HTTP/1.1" 201 273
2025-08-04 13:59:06,046 [INFO] ✅ Kullanıcı (ID: 53) gruba (ID: 101) başarıyla eklendi.
2025-08-04 13:59:06,047 [INFO] [Row 5] ➕ Kullanıcı (ID=53) gruba eklendi (GroupID=101)
