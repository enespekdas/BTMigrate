2025-08-11 12:29:27,273 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250811_122927.log
2025-08-11 12:29:27,273 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250811_122927.log
2025-08-11 12:29:27,274 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,379 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-11 12:29:27,379 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 12:29:27,381 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-11 12:29:27,382 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,478 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-11 12:29:27,478 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-11 12:29:27,479 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-11 12:29:27,480 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,521 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8864
2025-08-11 12:29:27,522 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-11 12:29:27,523 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,548 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-11 12:29:27,548 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 12:29:27,549 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-11 12:29:27,550 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,579 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 1939
2025-08-11 12:29:27,579 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-11 12:29:27,580 [INFO] ✅ UserGroup cache yüklendi. (6 kayıt)
2025-08-11 12:29:27,581 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,627 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2449
2025-08-11 12:29:27,627 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (7 kayıt)
2025-08-11 12:29:27,628 [INFO] ✅ User cache yüklendi. (7 kayıt)
2025-08-11 12:29:27,629 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-11 12:29:27,635 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-11 12:29:27,649 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 12:29:27,649 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 12:29:27,650 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,803 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 12:29:27,804 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-11 12:29:27,805 [INFO] Row 1: Managed System oluşturuldu.
2025-08-11 12:29:27,806 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:27,876 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 12:29:27,879 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,018 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-11 12:29:28,019 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-11 12:29:28,020 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:29:28,021 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,082 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/283/LinkedAccounts/165 HTTP/1.1" 201 1122
2025-08-11 12:29:28,083 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 283, AccountID: 165
2025-08-11 12:29:28,084 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:29:28,085 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,155 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 12:29:28,155 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 12:29:28,156 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 12:29:28,157 [INFO] 🚀 Application atama başlatıldı. (AccountID: 165)
2025-08-11 12:29:28,158 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,187 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/165/Applications HTTP/1.1" 200 2
2025-08-11 12:29:28,189 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,222 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/165/Applications/4 HTTP/1.1" 201 451
2025-08-11 12:29:28,222 [INFO] ✅ ApplicationID 4 → ManagedAccountID 165 ataması başarılı.
2025-08-11 12:29:28,223 [INFO] 📦 App atama özeti (AccountID:165) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 12:29:28,223 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:29:28,223 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10092, 'AccessLevelID': 3}]}
2025-08-11 12:29:28,223 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-11 12:29:28,224 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,322 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-11 12:29:28,322 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 115, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-11 12:29:28,322 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 115)
2025-08-11 12:29:28,324 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,382 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:29:28,382 [INFO] [Row 1] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:29:28,383 [INFO] Row 1: User group oluşturuldu ve SR/Role atandı: S_OZCAN
2025-08-11 12:29:28,385 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:29:28,385 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:29:28,385 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:29:28,386 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,527 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-11 12:29:28,527 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 65)
2025-08-11 12:29:28,529 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 65)
2025-08-11 12:29:28,530 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,565 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:29:28,566 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:29:28,566 [INFO] [Row 1] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:29:28,567 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:29:28,576 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 12:29:28,576 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 12:29:28,577 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,702 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-11 12:29:28,703 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-11 12:29:28,704 [INFO] Row 2: Managed System oluşturuldu.
2025-08-11 12:29:28,705 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,775 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:28,776 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 12:29:28,777 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,816 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/284/LinkedAccounts/165 HTTP/1.1" 201 1122
2025-08-11 12:29:28,816 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 284, AccountID: 165
2025-08-11 12:29:28,817 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:29:28,819 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,895 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10092/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:28,897 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 12:29:28,898 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:165).
2025-08-11 12:29:28,898 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 115)
2025-08-11 12:29:28,899 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,948 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:29:28,948 [INFO] [Row 2] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:29:28,949 [INFO] Row 2: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 12:29:28,950 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:29:28,950 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:29:28,950 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:29:28,950 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 65
2025-08-11 12:29:28,951 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:28,980 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:29:28,980 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:29:28,981 [INFO] [Row 2] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:29:28,982 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:29:28,991 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 12:29:28,991 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 12:29:28,992 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,154 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 12:29:29,156 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-11 12:29:29,156 [INFO] Row 3: Managed System oluşturuldu.
2025-08-11 12:29:29,157 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,221 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:29,222 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 12:29:29,223 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,265 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/285/LinkedAccounts/165 HTTP/1.1" 201 1122
2025-08-11 12:29:29,266 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 285, AccountID: 165
2025-08-11 12:29:29,266 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:29:29,268 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,313 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10092/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:29,314 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 12:29:29,315 [INFO] 🚀 Application atama başlatıldı. (AccountID: 165)
2025-08-11 12:29:29,316 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,344 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/165/Applications HTTP/1.1" 200 453
2025-08-11 12:29:29,345 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-11 12:29:29,346 [INFO] 📦 App atama özeti (AccountID:165) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 12:29:29,346 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:29:29,346 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 115)
2025-08-11 12:29:29,346 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,397 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:29:29,397 [INFO] [Row 3] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:29:29,398 [INFO] Row 3: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 12:29:29,399 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:29:29,399 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:29:29,399 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:29:29,399 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 65
2025-08-11 12:29:29,400 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,424 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:29:29,424 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:29:29,425 [INFO] [Row 3] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:29:29,426 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:29:29,436 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 12:29:29,436 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 12:29:29,437 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,574 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1023
2025-08-11 12:29:29,575 [INFO] Row 4: Managed System oluşturuldu: None
2025-08-11 12:29:29,576 [INFO] Row 4: Managed System oluşturuldu.
2025-08-11 12:29:29,577 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,644 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:29,646 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,767 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-11 12:29:29,767 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-11 12:29:29,768 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 12:29:29,769 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,813 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/286/LinkedAccounts/166 HTTP/1.1" 201 1122
2025-08-11 12:29:29,813 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 286, AccountID: 166
2025-08-11 12:29:29,814 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 12:29:29,816 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,869 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 275
2025-08-11 12:29:29,869 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:29:29,870 [INFO] Row 4: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:29:29,871 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:29:29,872 [INFO] [Row 4] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:29:29,872 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:29,900 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:29:29,900 [ERROR] [UserGroupRole] Kod: 4 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:29,901 [ERROR] [UserGroup] Kod: 4 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:29,902 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 12:29:29,902 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 12:29:29,902 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: []
2025-08-11 12:29:29,902 [INFO] [Row 4] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 12:29:29,912 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'linux'
2025-08-11 12:29:29,913 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-11 12:29:29,913 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: 'nondomain', OS: 'linux'
2025-08-11 12:29:29,913 [ERROR] [LinuxHandler] Kod: 5 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-11 12:29:29,913 [ERROR] [Dispatcher] Kod: 5 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 12:29:29,913 [ERROR] [ADManagedAccount] Kod: 2 Message: [ADManagedAccount] Kod: -300 Message: Domain controller bulunamadı. Domain: nondomain
2025-08-11 12:29:29,913 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -101 Message: AD managed account oluşturulamadı (ID yok).
2025-08-11 12:29:29,924 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 12:29:29,924 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 12:29:29,924 [ERROR] [MssqlHandler] Kod: 6 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz, default 1433 kullanılacak: nan
2025-08-11 12:29:29,925 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,047 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-11 12:29:30,048 [INFO] Row 6: MSSQL Managed System oluşturuldu: None
2025-08-11 12:29:30,048 [INFO] Row 6: Managed System oluşturuldu.
2025-08-11 12:29:30,050 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,140 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:29:30,141 [INFO] Row 2: AD managed account zaten var: pam100887
2025-08-11 12:29:30,142 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,183 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/287/LinkedAccounts/166 HTTP/1.1" 201 1122
2025-08-11 12:29:30,184 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 287, AccountID: 166
2025-08-11 12:29:30,185 [INFO] Row 2: MSSQL managed account oluşturuldu: pam100887
2025-08-11 12:29:30,186 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,288 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10093/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:30,289 [INFO] Row 6: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:29:30,290 [INFO] Row 6: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:29:30,290 [INFO] [Row 6] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:29:30,291 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,317 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:29:30,317 [ERROR] [UserGroupRole] Kod: 6 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:30,318 [ERROR] [UserGroup] Kod: 6 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:30,319 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 12:29:30,319 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 12:29:30,319 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: []
2025-08-11 12:29:30,319 [INFO] [Row 6] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 12:29:30,330 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 12:29:30,330 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 12:29:30,330 [ERROR] [MssqlHandler] Kod: 7 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz, default 1433 kullanılacak: nan
2025-08-11 12:29:30,331 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,452 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-11 12:29:30,453 [INFO] Row 7: MSSQL Managed System oluşturuldu: None
2025-08-11 12:29:30,453 [INFO] Row 7: Managed System oluşturuldu.
2025-08-11 12:29:30,455 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,523 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:29:30,524 [INFO] Row 2: AD managed account zaten var: pam100887
2025-08-11 12:29:30,525 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,565 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/288/LinkedAccounts/166 HTTP/1.1" 201 1122
2025-08-11 12:29:30,566 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 288, AccountID: 166
2025-08-11 12:29:30,567 [INFO] Row 2: MSSQL managed account oluşturuldu: pam100887
2025-08-11 12:29:30,568 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,611 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10093/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:29:30,612 [INFO] Row 7: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:29:30,613 [INFO] Row 7: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:29:30,613 [INFO] [Row 7] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:29:30,614 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,640 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:29:30,640 [ERROR] [UserGroupRole] Kod: 7 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:30,641 [ERROR] [UserGroup] Kod: 7 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:29:30,642 [DEBUG] [DEBUG] Row 7: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 12:29:30,642 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 12:29:30,642 [DEBUG] [DEBUG] Row 7: 🧪 Normalize üyeler: []
2025-08-11 12:29:30,642 [INFO] [Row 7] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 12:29:30,654 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 12:29:30,654 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 12:29:30,655 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 12:29:30,655 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,787 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1075
2025-08-11 12:29:30,788 [INFO] Row 8: Oracle Managed System oluşturuldu: None
2025-08-11 12:29:30,789 [INFO] Row 8: Managed System oluşturuldu.
2025-08-11 12:29:30,790 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:30,928 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/289/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 12:29:30,931 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,055 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/289/ManagedAccounts HTTP/1.1" 201 1101
2025-08-11 12:29:31,056 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100545
2025-08-11 12:29:31,057 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 12:29:31,057 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 12:29:31,058 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,145 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 12:29:31,146 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_MISIR
2025-08-11 12:29:31,146 [INFO] Row 8: Smart Rule oluşturuldu: THY_MA_E_MISIR
2025-08-11 12:29:31,147 [INFO] 🚀 Application atama başlatıldı. (AccountID: 167)
2025-08-11 12:29:31,148 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,175 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/167/Applications HTTP/1.1" 200 2
2025-08-11 12:29:31,178 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,209 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/167/Applications/6 HTTP/1.1" 201 285
2025-08-11 12:29:31,210 [INFO] ✅ ApplicationID 6 → ManagedAccountID 167 ataması başarılı.
2025-08-11 12:29:31,211 [INFO] 📦 App atama özeti (AccountID:167) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 12:29:31,211 [INFO] Row 8: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:29:31,211 [INFO] [Row 8] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 12:29:31,212 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,239 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles HTTP/1.1" 400 63
2025-08-11 12:29:31,239 [ERROR] [UserGroupRole] Kod: 8 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:29:31,240 [ERROR] [UserGroup] Kod: 8 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:29:31,241 [DEBUG] [DEBUG] Row 8: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 12:29:31,242 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 12:29:31,242 [DEBUG] [DEBUG] Row 8: 🧪 Normalize üyeler: []
2025-08-11 12:29:31,242 [INFO] [Row 8] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 12:29:31,255 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 12:29:31,255 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 12:29:31,255 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 12:29:31,256 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,396 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1077
2025-08-11 12:29:31,398 [INFO] Row 9: Oracle Managed System oluşturuldu: None
2025-08-11 12:29:31,398 [INFO] Row 9: Managed System oluşturuldu.
2025-08-11 12:29:31,399 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,495 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/290/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 12:29:31,498 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,614 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/290/ManagedAccounts HTTP/1.1" 201 1099
2025-08-11 12:29:31,615 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100546
2025-08-11 12:29:31,616 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 12:29:31,616 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 12:29:31,618 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,695 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10094/ManagedAccounts HTTP/1.1" 200 1103
2025-08-11 12:29:31,698 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,788 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10094/ManagedAccounts HTTP/1.1" 200 2203
2025-08-11 12:29:31,789 [INFO] [SmartRuleAPI] ✅ SmartRule güncellendi. ID=10094, AccountIDs=[168, 167]
2025-08-11 12:29:31,790 [INFO] Row 9: Smart Rule güncellendi (hesap eklendi): THY_MA_E_MISIR
2025-08-11 12:29:31,791 [INFO] 🚀 Application atama başlatıldı. (AccountID: 168)
2025-08-11 12:29:31,791 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,819 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/168/Applications HTTP/1.1" 200 2
2025-08-11 12:29:31,821 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,850 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/168/Applications/6 HTTP/1.1" 201 285
2025-08-11 12:29:31,850 [INFO] ✅ ApplicationID 6 → ManagedAccountID 168 ataması başarılı.
2025-08-11 12:29:31,851 [INFO] 📦 App atama özeti (AccountID:168) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 12:29:31,851 [INFO] Row 9: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:29:31,851 [INFO] [Row 9] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 12:29:31,852 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:29:31,881 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles HTTP/1.1" 400 63
2025-08-11 12:29:31,881 [ERROR] [UserGroupRole] Kod: 9 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:29:31,882 [ERROR] [UserGroup] Kod: 9 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:29:31,883 [DEBUG] [DEBUG] Row 9: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 12:29:31,883 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 12:29:31,883 [DEBUG] [DEBUG] Row 9: 🧪 Normalize üyeler: []
2025-08-11 12:29:31,883 [INFO] [Row 9] ℹ️ User group'a eklenecek kullanıcı yok.
