2025-08-03 15:20:00,697 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250803_152000.log
2025-08-03 15:20:00,697 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250803_152000.log
2025-08-03 15:20:00,698 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:00,779 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 9324
2025-08-03 15:20:00,780 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-03 15:20:00,781 [INFO] ✅ ManagedSystem cache yüklendi. (9 kayıt)
2025-08-03 15:20:00,782 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:00,887 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-03 15:20:00,888 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-03 15:20:00,889 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-03 15:20:00,890 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:00,930 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 10211
2025-08-03 15:20:00,932 [INFO] ✅ SmartRule cache yüklendi. (35 kayıt)
2025-08-03 15:20:00,933 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:00,958 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-03 15:20:00,959 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-03 15:20:00,960 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-03 15:20:00,961 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:00,987 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 649
2025-08-03 15:20:00,988 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (2 kayıt)
2025-08-03 15:20:00,989 [INFO] ✅ UserGroup cache yüklendi. (2 kayıt)
2025-08-03 15:20:01,000 [INFO] Row 1: ✅ Zaten mevcut → None
2025-08-03 15:20:01,000 [DEBUG] [Row 1] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam118064
2025-08-03 15:20:01,000 [DEBUG] [Row 1] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:01,001 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,069 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:01,071 [DEBUG] [Row 1] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:01,071 [INFO] [Row 1] ✅ AD managed account zaten var: pam118064
2025-08-03 15:20:01,071 [INFO] [Row 1] 🔗 Linkleme işlemi başlatıldı → SystemID: 185, AccountID: 105
2025-08-03 15:20:01,072 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,107 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/185/LinkedAccounts/105 HTTP/1.1" 200 1121
2025-08-03 15:20:01,108 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 185, AccountID: 105
2025-08-03 15:20:01,109 [DEBUG] [Row 1] 🔍 Smart Rule adı oluşturuldu: THY_MA_S_OZCAN
2025-08-03 15:20:01,109 [INFO] [Row 1] ✅ Smart Rule zaten mevcut: THY_MA_S_OZCAN (ID: 10042)
2025-08-03 15:20:01,110 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,170 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:01,172 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,273 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:01,273 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10042, AccountIDs=[105, 107, 110]
2025-08-03 15:20:01,274 [INFO] [Row 1] 📎 Smart Rule account listesi güncellendi: [105, 107, 110, 105]
2025-08-03 15:20:01,275 [INFO] 🚀 Application atama başlatıldı. (AccountID: 105)
2025-08-03 15:20:01,275 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,307 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/105/Applications HTTP/1.1" 200 901
2025-08-03 15:20:01,308 [INFO] ⚠️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:01,309 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,338 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/105/Applications HTTP/1.1" 200 901
2025-08-03 15:20:01,339 [INFO] ⚠️ Application 'mssql' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:01,340 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10042, 'AccessLevelID': 3}]}
2025-08-03 15:20:01,340 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-03 15:20:01,341 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,455 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 270
2025-08-03 15:20:01,455 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturuldu ama ID bulunamadı. Cevap: {'GroupID': 39, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-03 15:20:01,456 [INFO] Row 2: ✅ Zaten mevcut → None
2025-08-03 15:20:01,457 [DEBUG] [Row 1] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam118065
2025-08-03 15:20:01,457 [DEBUG] [Row 1] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:01,457 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,522 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:01,523 [DEBUG] [Row 1] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:01,523 [INFO] [Row 1] ✅ AD managed account zaten var: pam118065
2025-08-03 15:20:01,523 [INFO] [Row 1] 🔗 Linkleme işlemi başlatıldı → SystemID: 186, AccountID: 106
2025-08-03 15:20:01,524 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,557 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/186/LinkedAccounts/106 HTTP/1.1" 200 1121
2025-08-03 15:20:01,558 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 186, AccountID: 106
2025-08-03 15:20:01,559 [DEBUG] [Row 1] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-03 15:20:01,559 [INFO] [Row 1] ✅ Smart Rule zaten mevcut: THY_MA_E_PEKDAS (ID: 10043)
2025-08-03 15:20:01,560 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,604 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:01,606 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:01,821 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:01,821 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10043, AccountIDs=[106, 108, 111]
2025-08-03 15:20:01,822 [INFO] [Row 1] 📎 Smart Rule account listesi güncellendi: [106, 108, 111, 106]
2025-08-03 15:20:01,823 [INFO] 🚀 Application atama başlatıldı. (AccountID: 106)
2025-08-03 15:20:01,823 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_PEKDAS', 'description': 'E_PEKDAS', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10043, 'AccessLevelID': 3}]}
2025-08-03 15:20:01,823 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: E_PEKDAS
2025-08-03 15:20:01,824 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,060 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 272
2025-08-03 15:20:02,060 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturuldu ama ID bulunamadı. Cevap: {'GroupID': 40, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_PEKDAS', 'DistinguishedName': None, 'Description': 'E_PEKDAS', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-03 15:20:02,061 [INFO] Row 3: ✅ Zaten mevcut → None
2025-08-03 15:20:02,062 [DEBUG] [Row 1] 🔍 MSSQL Managed Account işlemi başlatıldı. IP: 10.59.76.112, Username: pam118064
2025-08-03 15:20:02,062 [DEBUG] [Row 1] 🆔 Bulunan managed system ID: 187
2025-08-03 15:20:02,062 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,127 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/187/ManagedAccounts HTTP/1.1" 200 1103
2025-08-03 15:20:02,129 [INFO] [Row 1] ✅ MSSQL managed account zaten var: pam118064
2025-08-03 15:20:02,129 [DEBUG] [Row 1] 🔍 Smart Rule adı oluşturuldu: THY_MA_S_OZCAN
2025-08-03 15:20:02,129 [INFO] [Row 1] ✅ Smart Rule zaten mevcut: THY_MA_S_OZCAN (ID: 10042)
2025-08-03 15:20:02,130 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,173 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:02,175 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,321 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:02,321 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10042, AccountIDs=[105, 107, 110]
2025-08-03 15:20:02,322 [INFO] [Row 1] 📎 Smart Rule account listesi güncellendi: [105, 107, 110, 107]
2025-08-03 15:20:02,322 [INFO] 🚀 Application atama başlatıldı. (AccountID: 107)
2025-08-03 15:20:02,323 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,354 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/107/Applications HTTP/1.1" 200 449
2025-08-03 15:20:02,355 [INFO] ⚠️ Application 'mssql' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:02,356 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10042, 'AccessLevelID': 3}]}
2025-08-03 15:20:02,356 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-03 15:20:02,357 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,380 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 400 37
2025-08-03 15:20:02,380 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturulamadı: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups
2025-08-03 15:20:02,381 [INFO] Row 4: ✅ Zaten mevcut → None
2025-08-03 15:20:02,382 [DEBUG] [Row 2] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100887
2025-08-03 15:20:02,382 [DEBUG] [Row 2] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:02,382 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,447 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:02,449 [DEBUG] [Row 2] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:02,449 [INFO] [Row 2] ✅ AD managed account zaten var: pam100887
2025-08-03 15:20:02,449 [INFO] [Row 2] 🔗 Linkleme işlemi başlatıldı → SystemID: 188, AccountID: 108
2025-08-03 15:20:02,450 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,482 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/188/LinkedAccounts/108 HTTP/1.1" 200 1122
2025-08-03 15:20:02,483 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 188, AccountID: 108
2025-08-03 15:20:02,484 [DEBUG] [Row 2] 🔍 Smart Rule adı oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-03 15:20:02,485 [INFO] [Row 2] ✅ Smart Rule zaten mevcut: THY_MA_Y_UCUNCUOGLU (ID: 10044)
2025-08-03 15:20:02,485 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,529 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10044/ManagedAccounts HTTP/1.1" 200 1124
2025-08-03 15:20:02,532 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,625 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10044/ManagedAccounts HTTP/1.1" 200 1124
2025-08-03 15:20:02,625 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10044, AccountIDs=[108]
2025-08-03 15:20:02,626 [INFO] [Row 2] 📎 Smart Rule account listesi güncellendi: [108, 108]
2025-08-03 15:20:02,627 [INFO] 🚀 Application atama başlatıldı. (AccountID: 108)
2025-08-03 15:20:02,627 [DEBUG] [Row 2] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'Y_UCUNCUOGLU', 'description': 'Y_UCUNCUOGLU', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10044, 'AccessLevelID': 3}]}
2025-08-03 15:20:02,627 [INFO] [Row 2] 🚀 Yeni user group oluşturuluyor: Y_UCUNCUOGLU
2025-08-03 15:20:02,628 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,717 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 280
2025-08-03 15:20:02,718 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturuldu ama ID bulunamadı. Cevap: {'GroupID': 41, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'Y_UCUNCUOGLU', 'DistinguishedName': None, 'Description': 'Y_UCUNCUOGLU', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-03 15:20:02,719 [INFO] Row 5: ✅ Zaten mevcut → None
2025-08-03 15:20:02,719 [DEBUG] [Row 2] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100888
2025-08-03 15:20:02,719 [DEBUG] [Row 2] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:02,720 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,783 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:02,785 [DEBUG] [Row 2] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:02,785 [INFO] [Row 2] ✅ AD managed account zaten var: pam100888
2025-08-03 15:20:02,786 [INFO] [Row 2] 🔗 Linkleme işlemi başlatıldı → SystemID: 186, AccountID: 109
2025-08-03 15:20:02,786 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,822 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/186/LinkedAccounts/109 HTTP/1.1" 200 1123
2025-08-03 15:20:02,823 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 186, AccountID: 109
2025-08-03 15:20:02,824 [DEBUG] [Row 2] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_YARDIMCI
2025-08-03 15:20:02,824 [INFO] [Row 2] ✅ Smart Rule zaten mevcut: THY_MA_E_YARDIMCI (ID: 10045)
2025-08-03 15:20:02,825 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:02,868 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10045/ManagedAccounts HTTP/1.1" 200 1125
2025-08-03 15:20:02,870 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,005 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10045/ManagedAccounts HTTP/1.1" 200 1125
2025-08-03 15:20:03,006 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10045, AccountIDs=[109]
2025-08-03 15:20:03,007 [INFO] [Row 2] 📎 Smart Rule account listesi güncellendi: [109, 109]
2025-08-03 15:20:03,007 [INFO] 🚀 Application atama başlatıldı. (AccountID: 109)
2025-08-03 15:20:03,007 [DEBUG] [Row 2] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_YARDIMCI', 'description': 'E_YARDIMCI', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10045, 'AccessLevelID': 3}]}
2025-08-03 15:20:03,007 [INFO] [Row 2] 🚀 Yeni user group oluşturuluyor: E_YARDIMCI
2025-08-03 15:20:03,008 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,093 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 276
2025-08-03 15:20:03,094 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturuldu ama ID bulunamadı. Cevap: {'GroupID': 42, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_YARDIMCI', 'DistinguishedName': None, 'Description': 'E_YARDIMCI', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-03 15:20:03,095 [INFO] Row 6: ✅ Zaten mevcut → None
2025-08-03 15:20:03,096 [DEBUG] [Row 3] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: PAM100545
2025-08-03 15:20:03,096 [DEBUG] [Row 3] 🆔 Bulunan managed system ID: 189
2025-08-03 15:20:03,096 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,162 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/189/ManagedAccounts HTTP/1.1" 200 2205
2025-08-03 15:20:03,163 [INFO] [Row 3] ✅ Oracle managed account zaten var: PAM100545
2025-08-03 15:20:03,164 [DEBUG] [Row 3] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_MISIR
2025-08-03 15:20:03,164 [INFO] [Row 3] ✅ Smart Rule zaten mevcut: THY_MA_E_MISIR (ID: 10046)
2025-08-03 15:20:03,165 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,223 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10046/ManagedAccounts HTTP/1.1" 200 1103
2025-08-03 15:20:03,225 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,317 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10046/ManagedAccounts HTTP/1.1" 200 1103
2025-08-03 15:20:03,318 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10046, AccountIDs=[110]
2025-08-03 15:20:03,319 [INFO] [Row 3] 📎 Smart Rule account listesi güncellendi: [110, 110]
2025-08-03 15:20:03,319 [INFO] 🚀 Application atama başlatıldı. (AccountID: 110)
2025-08-03 15:20:03,320 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,347 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/110/Applications HTTP/1.1" 200 739
2025-08-03 15:20:03,348 [INFO] ⚠️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:03,349 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,378 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/110/Applications HTTP/1.1" 200 739
2025-08-03 15:20:03,379 [INFO] ⚠️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:03,380 [DEBUG] [Row 3] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_MISIR', 'description': 'E_MISIR', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10046, 'AccessLevelID': 3}]}
2025-08-03 15:20:03,380 [INFO] [Row 3] 🚀 Yeni user group oluşturuluyor: E_MISIR
2025-08-03 15:20:03,381 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,613 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 270
2025-08-03 15:20:03,614 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturuldu ama ID bulunamadı. Cevap: {'GroupID': 43, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'E_MISIR', 'DistinguishedName': None, 'Description': 'E_MISIR', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-03 15:20:03,615 [INFO] Row 7: ✅ Zaten mevcut → None
2025-08-03 15:20:03,615 [DEBUG] [Row 3] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: admin
2025-08-03 15:20:03,615 [INFO] [Row 3] ℹ️ Atlandı: 'pam' ile başlamayan Oracle username: admin
2025-08-03 15:20:03,615 [INFO] Row 8: ✅ Zaten mevcut → None
2025-08-03 15:20:03,615 [DEBUG] [Row 4] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100887
2025-08-03 15:20:03,615 [DEBUG] [Row 4] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:03,616 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,681 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:03,683 [DEBUG] [Row 4] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:03,683 [INFO] [Row 4] ✅ AD managed account zaten var: pam100887
2025-08-03 15:20:03,683 [INFO] [Row 4] 🔗 Linkleme işlemi başlatıldı → SystemID: 188, AccountID: 108
2025-08-03 15:20:03,684 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,716 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/188/LinkedAccounts/108 HTTP/1.1" 200 1122
2025-08-03 15:20:03,717 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 188, AccountID: 108
2025-08-03 15:20:03,718 [DEBUG] [Row 4] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-03 15:20:03,718 [INFO] [Row 4] ✅ Smart Rule zaten mevcut: THY_MA_E_PEKDAS (ID: 10043)
2025-08-03 15:20:03,719 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,767 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:03,769 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,860 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:03,861 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10043, AccountIDs=[106, 108, 111]
2025-08-03 15:20:03,862 [INFO] [Row 4] 📎 Smart Rule account listesi güncellendi: [106, 108, 111, 108]
2025-08-03 15:20:03,862 [INFO] 🚀 Application atama başlatıldı. (AccountID: 108)
2025-08-03 15:20:03,862 [DEBUG] [Row 4] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_PEKDAS', 'description': 'E_PEKDAS', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10043, 'AccessLevelID': 3}]}
2025-08-03 15:20:03,863 [INFO] [Row 4] 🚀 Yeni user group oluşturuluyor: E_PEKDAS
2025-08-03 15:20:03,863 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,886 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 400 38
2025-08-03 15:20:03,887 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturulamadı: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups
2025-08-03 15:20:03,888 [INFO] Row 9: ✅ Zaten mevcut → None
2025-08-03 15:20:03,888 [DEBUG] [Row 4] 🔍 AD Managed Account işlemi başlatıldı. Domain: quasys.local, Username: pam100888
2025-08-03 15:20:03,888 [DEBUG] [Row 4] 💾 Cache'ten alınan managed systems: 9 kayıt
2025-08-03 15:20:03,889 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,951 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 4492
2025-08-03 15:20:03,952 [DEBUG] [Row 4] 🔄 Mevcut managed account sayısı: 4
2025-08-03 15:20:03,953 [INFO] [Row 4] ✅ AD managed account zaten var: pam100888
2025-08-03 15:20:03,953 [INFO] [Row 4] 🔗 Linkleme işlemi başlatıldı → SystemID: 186, AccountID: 109
2025-08-03 15:20:03,954 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:03,989 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/186/LinkedAccounts/109 HTTP/1.1" 200 1123
2025-08-03 15:20:03,989 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 186, AccountID: 109
2025-08-03 15:20:03,991 [DEBUG] [Row 4] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_YARDIMCI
2025-08-03 15:20:03,991 [INFO] [Row 4] ✅ Smart Rule zaten mevcut: THY_MA_E_YARDIMCI (ID: 10045)
2025-08-03 15:20:03,992 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,035 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10045/ManagedAccounts HTTP/1.1" 200 1125
2025-08-03 15:20:04,037 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,126 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10045/ManagedAccounts HTTP/1.1" 200 1125
2025-08-03 15:20:04,127 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10045, AccountIDs=[109]
2025-08-03 15:20:04,128 [INFO] [Row 4] 📎 Smart Rule account listesi güncellendi: [109, 109]
2025-08-03 15:20:04,128 [INFO] 🚀 Application atama başlatıldı. (AccountID: 109)
2025-08-03 15:20:04,128 [DEBUG] [Row 4] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_YARDIMCI', 'description': 'E_YARDIMCI', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10045, 'AccessLevelID': 3}]}
2025-08-03 15:20:04,128 [INFO] [Row 4] 🚀 Yeni user group oluşturuluyor: E_YARDIMCI
2025-08-03 15:20:04,129 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,152 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 400 40
2025-08-03 15:20:04,152 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturulamadı: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups
2025-08-03 15:20:04,153 [INFO] Row 10: ✅ Zaten mevcut → None
2025-08-03 15:20:04,154 [DEBUG] [Row 5] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: PAM100545
2025-08-03 15:20:04,154 [DEBUG] [Row 5] 🆔 Bulunan managed system ID: 189
2025-08-03 15:20:04,154 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,226 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/189/ManagedAccounts HTTP/1.1" 200 2205
2025-08-03 15:20:04,227 [INFO] [Row 5] ✅ Oracle managed account zaten var: PAM100545
2025-08-03 15:20:04,228 [DEBUG] [Row 5] 🔍 Smart Rule adı oluşturuldu: THY_MA_S_OZCAN
2025-08-03 15:20:04,228 [INFO] [Row 5] ✅ Smart Rule zaten mevcut: THY_MA_S_OZCAN (ID: 10042)
2025-08-03 15:20:04,228 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,282 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:04,285 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,373 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10042/ManagedAccounts HTTP/1.1" 200 3327
2025-08-03 15:20:04,374 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10042, AccountIDs=[105, 107, 110]
2025-08-03 15:20:04,374 [INFO] [Row 5] 📎 Smart Rule account listesi güncellendi: [105, 107, 110, 110]
2025-08-03 15:20:04,375 [INFO] 🚀 Application atama başlatıldı. (AccountID: 110)
2025-08-03 15:20:04,376 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,404 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/110/Applications HTTP/1.1" 200 739
2025-08-03 15:20:04,405 [INFO] ⚠️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:04,405 [DEBUG] [Row 5] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10042, 'AccessLevelID': 3}]}
2025-08-03 15:20:04,406 [INFO] [Row 5] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-03 15:20:04,406 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,430 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 400 37
2025-08-03 15:20:04,430 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturulamadı: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups
2025-08-03 15:20:04,431 [INFO] Row 11: ✅ Zaten mevcut → None
2025-08-03 15:20:04,432 [DEBUG] [Row 5] 🔍 Oracle Managed Account işlemi başlatıldı. IP: 10.59.76.111, Username: pam100888
2025-08-03 15:20:04,432 [DEBUG] [Row 5] 🆔 Bulunan managed system ID: 189
2025-08-03 15:20:04,432 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,497 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/189/ManagedAccounts HTTP/1.1" 200 2205
2025-08-03 15:20:04,498 [INFO] [Row 5] ✅ Oracle managed account zaten var: pam100888
2025-08-03 15:20:04,499 [DEBUG] [Row 5] 🔍 Smart Rule adı oluşturuldu: THY_MA_E_PEKDAS
2025-08-03 15:20:04,499 [INFO] [Row 5] ✅ Smart Rule zaten mevcut: THY_MA_E_PEKDAS (ID: 10043)
2025-08-03 15:20:04,499 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,541 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:04,544 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,683 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10043/ManagedAccounts HTTP/1.1" 200 3348
2025-08-03 15:20:04,684 [INFO] [SmartRuleAPI] 🔁 SmartRule güncellendi. ID=10043, AccountIDs=[106, 108, 111]
2025-08-03 15:20:04,685 [INFO] [Row 5] 📎 Smart Rule account listesi güncellendi: [106, 108, 111, 111]
2025-08-03 15:20:04,685 [INFO] 🚀 Application atama başlatıldı. (AccountID: 111)
2025-08-03 15:20:04,686 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,713 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/111/Applications HTTP/1.1" 200 287
2025-08-03 15:20:04,715 [INFO] ⚠️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-03 15:20:04,715 [DEBUG] [Row 5] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'E_PEKDAS', 'description': 'E_PEKDAS', 'isActive': True, 'Permissions': '[ { PermissionID: 52, AccessLevelID: 1 },\t{ PermissionID: 76, AccessLevelID: 3 },\t{ PermissionID: 77, AccessLevelID: 1 }]', 'SmartRuleAccess': [{'SmartRuleID': 10043, 'AccessLevelID': 3}]}
2025-08-03 15:20:04,715 [INFO] [Row 5] 🚀 Yeni user group oluşturuluyor: E_PEKDAS
2025-08-03 15:20:04,716 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-03 15:20:04,741 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 400 38
2025-08-03 15:20:04,741 [ERROR] [UserGroupAPI] Kod: -1 Message: User group oluşturulamadı: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups
