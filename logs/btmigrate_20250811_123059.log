2025-08-11 12:30:59,681 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250811_123059.log
2025-08-11 12:30:59,682 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250811_123059.log
2025-08-11 12:30:59,683 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:30:59,770 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 12549
2025-08-11 12:30:59,770 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (12 kayıt)
2025-08-11 12:30:59,771 [INFO] ✅ ManagedSystem cache yüklendi. (12 kayıt)
2025-08-11 12:30:59,772 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:30:59,882 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-11 12:30:59,883 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-11 12:30:59,884 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-11 12:30:59,885 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:30:59,973 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 9677
2025-08-11 12:30:59,974 [INFO] ✅ SmartRule cache yüklendi. (33 kayıt)
2025-08-11 12:30:59,975 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,000 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-11 12:31:00,000 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 12:31:00,001 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-11 12:31:00,002 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,029 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 2258
2025-08-11 12:31:00,029 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (7 kayıt)
2025-08-11 12:31:00,031 [INFO] ✅ UserGroup cache yüklendi. (7 kayıt)
2025-08-11 12:31:00,032 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,069 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2774
2025-08-11 12:31:00,069 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (8 kayıt)
2025-08-11 12:31:00,070 [INFO] ✅ User cache yüklendi. (8 kayıt)
2025-08-11 12:31:00,071 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-11 12:31:00,078 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-11 12:31:00,088 [INFO] Row 1: ✅ Zaten mevcut → None
2025-08-11 12:31:00,089 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,171 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:00,172 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 12:31:00,173 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,208 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/283/LinkedAccounts/165 HTTP/1.1" 200 1122
2025-08-11 12:31:00,209 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 283, AccountID: 165
2025-08-11 12:31:00,210 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:31:00,211 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,258 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10092/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:00,260 [INFO] Row 1: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 12:31:00,260 [INFO] 🚀 Application atama başlatıldı. (AccountID: 165)
2025-08-11 12:31:00,261 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,292 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/165/Applications HTTP/1.1" 200 453
2025-08-11 12:31:00,293 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-11 12:31:00,294 [INFO] 📦 App atama özeti (AccountID:165) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 12:31:00,294 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:31:00,294 [INFO] [Row 1] ✅ User group zaten mevcut: S_OZCAN (ID: 115)
2025-08-11 12:31:00,295 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,354 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:31:00,355 [INFO] [Row 1] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:31:00,356 [INFO] Row 1: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 12:31:00,357 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:31:00,357 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:31:00,357 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:31:00,357 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 65
2025-08-11 12:31:00,358 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,385 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:31:00,385 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:31:00,386 [INFO] [Row 1] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:31:00,387 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:00,397 [INFO] Row 2: ✅ Zaten mevcut → None
2025-08-11 12:31:00,398 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,468 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:00,469 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 12:31:00,470 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,504 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/284/LinkedAccounts/165 HTTP/1.1" 200 1122
2025-08-11 12:31:00,505 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 284, AccountID: 165
2025-08-11 12:31:00,506 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:31:00,508 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,554 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10092/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:00,556 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 12:31:00,556 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:165).
2025-08-11 12:31:00,557 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 115)
2025-08-11 12:31:00,557 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,615 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:31:00,616 [INFO] [Row 2] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:31:00,617 [INFO] Row 2: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 12:31:00,618 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:31:00,619 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:31:00,619 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:31:00,619 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 65
2025-08-11 12:31:00,620 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,648 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:31:00,648 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:31:00,649 [INFO] [Row 2] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:31:00,650 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:00,659 [INFO] Row 3: ✅ Zaten mevcut → None
2025-08-11 12:31:00,660 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,743 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:00,745 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 12:31:00,746 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,782 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/285/LinkedAccounts/165 HTTP/1.1" 200 1122
2025-08-11 12:31:00,782 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 285, AccountID: 165
2025-08-11 12:31:00,783 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 12:31:00,785 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,836 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10092/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:00,837 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 12:31:00,838 [INFO] 🚀 Application atama başlatıldı. (AccountID: 165)
2025-08-11 12:31:00,839 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,868 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/165/Applications HTTP/1.1" 200 453
2025-08-11 12:31:00,869 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-11 12:31:00,870 [INFO] 📦 App atama özeti (AccountID:165) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 12:31:00,870 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:31:00,870 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 115)
2025-08-11 12:31:00,871 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,938 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/115/SmartRules/10092/Roles HTTP/1.1" 204 0
2025-08-11 12:31:00,938 [INFO] [Row 3] ✅ SmartRule Role ataması başarılı → GroupID=115, RuleID=10092
2025-08-11 12:31:00,939 [INFO] Row 3: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 12:31:00,940 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=115
2025-08-11 12:31:00,940 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 12:31:00,940 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 12:31:00,940 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 65
2025-08-11 12:31:00,941 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:00,968 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/65/UserGroups/115 HTTP/1.1" 201 271
2025-08-11 12:31:00,968 [INFO] ✅ Kullanıcı (ID: 65) gruba (ID: 115) başarıyla eklendi.
2025-08-11 12:31:00,969 [INFO] [Row 3] ➕ Kullanıcı (ID=65) gruba eklendi (GroupID=115)
2025-08-11 12:31:00,970 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:00,981 [INFO] Row 4: ✅ Zaten mevcut → None
2025-08-11 12:31:00,982 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,047 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:01,048 [INFO] Row 2: AD managed account zaten var: pam100887
2025-08-11 12:31:01,049 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,084 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/286/LinkedAccounts/166 HTTP/1.1" 200 1122
2025-08-11 12:31:01,085 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 286, AccountID: 166
2025-08-11 12:31:01,086 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 12:31:01,087 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,151 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10093/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:01,153 [INFO] Row 4: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:31:01,153 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:31:01,154 [INFO] [Row 4] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:31:01,154 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,188 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:31:01,188 [ERROR] [UserGroupRole] Kod: 4 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,189 [ERROR] [UserGroup] Kod: 4 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,190 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: Y_UCUNCUOGLU (Tip: <class 'str'>) → GroupID=108
2025-08-11 12:31:01,190 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: Y_UCUNCUOGLU
2025-08-11 12:31:01,190 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['y_ucuncuoglu']
2025-08-11 12:31:01,191 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,259 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 223
2025-08-11 12:31:01,259 [INFO] ✅ Kullanıcı oluşturuldu: y_ucuncuoglu (ID: 66)
2025-08-11 12:31:01,260 [INFO] ✅ Yeni kullanıcı cache'e eklendi: y_ucuncuoglu (ID: 66)
2025-08-11 12:31:01,261 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,323 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/66/UserGroups/108 HTTP/1.1" 201 281
2025-08-11 12:31:01,324 [INFO] ✅ Kullanıcı (ID: 66) gruba (ID: 108) başarıyla eklendi.
2025-08-11 12:31:01,325 [INFO] [Row 4] ➕ Kullanıcı (ID=66) gruba eklendi (GroupID=108)
2025-08-11 12:31:01,326 [INFO] Row 4: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:01,339 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'linux'
2025-08-11 12:31:01,339 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-11 12:31:01,339 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: 'nondomain', OS: 'linux'
2025-08-11 12:31:01,339 [ERROR] [LinuxHandler] Kod: 5 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-11 12:31:01,339 [ERROR] [Dispatcher] Kod: 5 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 12:31:01,339 [ERROR] [ADManagedAccount] Kod: 2 Message: [ADManagedAccount] Kod: -300 Message: Domain controller bulunamadı. Domain: nondomain
2025-08-11 12:31:01,339 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -101 Message: AD managed account oluşturulamadı (ID yok).
2025-08-11 12:31:01,351 [INFO] Row 6: ✅ Zaten mevcut → None
2025-08-11 12:31:01,353 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,432 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:01,434 [INFO] Row 2: AD managed account zaten var: pam100887
2025-08-11 12:31:01,435 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,471 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/287/LinkedAccounts/166 HTTP/1.1" 200 1122
2025-08-11 12:31:01,471 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 287, AccountID: 166
2025-08-11 12:31:01,472 [INFO] Row 2: MSSQL managed account oluşturuldu: pam100887
2025-08-11 12:31:01,474 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,523 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10093/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:01,524 [INFO] Row 6: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:31:01,525 [INFO] Row 6: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:31:01,525 [INFO] [Row 6] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:31:01,526 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,553 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:31:01,554 [ERROR] [UserGroupRole] Kod: 6 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,555 [ERROR] [UserGroup] Kod: 6 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,555 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: Y_UCUNCUOGLU (Tip: <class 'str'>) → GroupID=108
2025-08-11 12:31:01,556 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: Y_UCUNCUOGLU
2025-08-11 12:31:01,556 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: ['y_ucuncuoglu']
2025-08-11 12:31:01,556 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: y_ucuncuoglu → ID: 66
2025-08-11 12:31:01,556 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,583 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/66/UserGroups/108 HTTP/1.1" 201 281
2025-08-11 12:31:01,583 [INFO] ✅ Kullanıcı (ID: 66) gruba (ID: 108) başarıyla eklendi.
2025-08-11 12:31:01,584 [INFO] [Row 6] ➕ Kullanıcı (ID=66) gruba eklendi (GroupID=108)
2025-08-11 12:31:01,585 [INFO] Row 6: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:01,597 [INFO] Row 7: ✅ Zaten mevcut → None
2025-08-11 12:31:01,598 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,666 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2247
2025-08-11 12:31:01,667 [INFO] Row 2: AD managed account zaten var: pam100887
2025-08-11 12:31:01,669 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,720 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/288/LinkedAccounts/166 HTTP/1.1" 200 1122
2025-08-11 12:31:01,720 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 288, AccountID: 166
2025-08-11 12:31:01,721 [INFO] Row 2: MSSQL managed account oluşturuldu: pam100887
2025-08-11 12:31:01,723 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,771 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10093/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 12:31:01,772 [INFO] Row 7: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_Y_UCUNCUOGLU
2025-08-11 12:31:01,773 [INFO] Row 7: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:166).
2025-08-11 12:31:01,773 [INFO] [Row 7] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 12:31:01,774 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,803 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles HTTP/1.1" 400 63
2025-08-11 12:31:01,804 [ERROR] [UserGroupRole] Kod: 7 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,805 [ERROR] [UserGroup] Kod: 7 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10093/Roles
2025-08-11 12:31:01,806 [DEBUG] [DEBUG] Row 7: ➡️ Girdi üyeleri: Y_UCUNCUOGLU (Tip: <class 'str'>) → GroupID=108
2025-08-11 12:31:01,806 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: Y_UCUNCUOGLU
2025-08-11 12:31:01,806 [DEBUG] [DEBUG] Row 7: 🧪 Normalize üyeler: ['y_ucuncuoglu']
2025-08-11 12:31:01,806 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: y_ucuncuoglu → ID: 66
2025-08-11 12:31:01,807 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,833 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/66/UserGroups/108 HTTP/1.1" 201 281
2025-08-11 12:31:01,833 [INFO] ✅ Kullanıcı (ID: 66) gruba (ID: 108) başarıyla eklendi.
2025-08-11 12:31:01,834 [INFO] [Row 7] ➕ Kullanıcı (ID=66) gruba eklendi (GroupID=108)
2025-08-11 12:31:01,835 [INFO] Row 7: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 12:31:01,848 [INFO] Row 8: ✅ Zaten mevcut → None
2025-08-11 12:31:01,849 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,939 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/289/ManagedAccounts HTTP/1.1" 200 1103
2025-08-11 12:31:01,940 [INFO] Row 3: Oracle managed account zaten var: PAM100545
2025-08-11 12:31:01,941 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 12:31:01,942 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:01,992 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10094/ManagedAccounts HTTP/1.1" 200 2203
2025-08-11 12:31:01,993 [INFO] Row 8: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_E_MISIR
2025-08-11 12:31:01,994 [INFO] 🚀 Application atama başlatıldı. (AccountID: 167)
2025-08-11 12:31:01,995 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:02,025 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/167/Applications HTTP/1.1" 200 287
2025-08-11 12:31:02,026 [INFO] ℹ️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-11 12:31:02,027 [INFO] 📦 App atama özeti (AccountID:167) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 12:31:02,027 [INFO] Row 8: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:31:02,027 [INFO] [Row 8] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 12:31:02,028 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:02,055 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles HTTP/1.1" 400 63
2025-08-11 12:31:02,055 [ERROR] [UserGroupRole] Kod: 8 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:31:02,056 [ERROR] [UserGroup] Kod: 8 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:31:02,057 [DEBUG] [DEBUG] Row 8: ➡️ Girdi üyeleri: E_MISIR (Tip: <class 'str'>) → GroupID=109
2025-08-11 12:31:02,057 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_MISIR
2025-08-11 12:31:02,057 [DEBUG] [DEBUG] Row 8: 🧪 Normalize üyeler: ['e_misir']
2025-08-11 12:31:02,058 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:09,425 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 400 59
2025-08-11 12:31:09,426 [ERROR] [UserAPI] Kod: -1 Message: Kullanıcı oluşturma hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/Users/
2025-08-11 12:31:09,426 [ERROR] [UserGroupMember] Kod: 8 Message: [USER] Kullanıcı bulunamadı/oluşturulamadı: e_misir
2025-08-11 12:31:09,427 [ERROR] [UserGroupMember] Kod: 8 Message: [UserGroupMember] Kod: -7901 Message: Hiçbir geçerli kullanıcı bulunamadı; üyelik yapılmadı.
2025-08-11 12:31:09,440 [INFO] Row 9: ✅ Zaten mevcut → None
2025-08-11 12:31:09,441 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:09,513 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/290/ManagedAccounts HTTP/1.1" 200 1101
2025-08-11 12:31:09,514 [INFO] Row 4: Oracle managed account zaten var: PAM100546
2025-08-11 12:31:09,514 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 12:31:09,516 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:09,566 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10094/ManagedAccounts HTTP/1.1" 200 2203
2025-08-11 12:31:09,568 [INFO] Row 9: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_E_MISIR
2025-08-11 12:31:09,569 [INFO] 🚀 Application atama başlatıldı. (AccountID: 168)
2025-08-11 12:31:09,570 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:09,624 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/168/Applications HTTP/1.1" 200 287
2025-08-11 12:31:09,627 [INFO] ℹ️ Application 'oracle' zaten atanmış, atlama yapıldı.
2025-08-11 12:31:09,628 [INFO] 📦 App atama özeti (AccountID:168) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 12:31:09,628 [INFO] Row 9: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 12:31:09,628 [INFO] [Row 9] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 12:31:09,630 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:09,660 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles HTTP/1.1" 400 63
2025-08-11 12:31:09,660 [ERROR] [UserGroupRole] Kod: 9 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:31:09,661 [ERROR] [UserGroup] Kod: 9 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10094/Roles
2025-08-11 12:31:09,662 [DEBUG] [DEBUG] Row 9: ➡️ Girdi üyeleri: E_MISIR (Tip: <class 'str'>) → GroupID=109
2025-08-11 12:31:09,662 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: E_MISIR
2025-08-11 12:31:09,662 [DEBUG] [DEBUG] Row 9: 🧪 Normalize üyeler: ['e_misir']
2025-08-11 12:31:09,663 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 12:31:16,979 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 400 59
2025-08-11 12:31:16,980 [ERROR] [UserAPI] Kod: -1 Message: Kullanıcı oluşturma hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/Users/
2025-08-11 12:31:16,981 [ERROR] [UserGroupMember] Kod: 9 Message: [USER] Kullanıcı bulunamadı/oluşturulamadı: e_misir
2025-08-11 12:31:16,981 [ERROR] [UserGroupMember] Kod: 9 Message: [UserGroupMember] Kod: -7901 Message: Hiçbir geçerli kullanıcı bulunamadı; üyelik yapılmadı.
