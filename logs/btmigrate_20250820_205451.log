2025-08-20 20:54:51,105 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250820_205451.log
2025-08-20 20:54:51,105 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250820_205451.log
2025-08-20 20:54:51,106 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,215 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-20 20:54:51,215 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-20 20:54:51,216 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-20 20:54:51,217 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,324 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-20 20:54:51,325 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-20 20:54:51,325 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-20 20:54:51,327 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,385 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8866
2025-08-20 20:54:51,387 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-20 20:54:51,388 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,432 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-20 20:54:51,432 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-20 20:54:51,433 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-20 20:54:51,434 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,480 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 1951
2025-08-20 20:54:51,480 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-20 20:54:51,481 [INFO] ✅ UserGroup cache yüklendi. (6 kayıt)
2025-08-20 20:54:51,482 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,544 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2820
2025-08-20 20:54:51,544 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (8 kayıt)
2025-08-20 20:54:51,545 [INFO] ✅ User cache yüklendi. (8 kayıt)
2025-08-20 20:54:51,553 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-20 20:54:51,565 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-20 20:54:51,566 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-20 20:54:51,566 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,785 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-20 20:54:51,787 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-20 20:54:51,787 [INFO] Row 1: Managed System oluşturuldu.
2025-08-20 20:54:51,789 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:51,875 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-20 20:54:51,877 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,030 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-20 20:54:52,031 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-20 20:54:52,032 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-20 20:54:52,034 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,098 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/313/LinkedAccounts/179 HTTP/1.1" 201 1123
2025-08-20 20:54:52,099 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 313, AccountID: 179
2025-08-20 20:54:52,101 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-20 20:54:52,103 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,182 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-20 20:54:52,182 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-20 20:54:52,183 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-20 20:54:52,185 [INFO] 🚀 Application atama başlatıldı. (AccountID: 179)
2025-08-20 20:54:52,186 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,232 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/179/Applications HTTP/1.1" 200 2
2025-08-20 20:54:52,235 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,287 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/179/Applications/4 HTTP/1.1" 201 451
2025-08-20 20:54:52,287 [INFO] ✅ ApplicationID 4 → ManagedAccountID 179 ataması başarılı.
2025-08-20 20:54:52,288 [INFO] 📦 App atama özeti (AccountID:179) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-20 20:54:52,289 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-20 20:54:52,290 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10103, 'AccessLevelID': 3}]}
2025-08-20 20:54:52,290 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-20 20:54:52,291 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,415 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-20 20:54:52,416 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 124, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-20 20:54:52,416 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 124)
2025-08-20 20:54:52,419 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,468 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/124/SmartRules HTTP/1.1" 200 285
2025-08-20 20:54:52,469 [INFO] Row 1: User group oluşturuldu ve SR/Role garanti altına alındı: S_OZCAN (SR/Role zaten atanmış)
2025-08-20 20:54:52,470 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=124
2025-08-20 20:54:52,471 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-20 20:54:52,471 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-20 20:54:52,472 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,584 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-20 20:54:52,585 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 75)
2025-08-20 20:54:52,586 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 75)
2025-08-20 20:54:52,587 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,643 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/75/UserGroups/124 HTTP/1.1" 201 271
2025-08-20 20:54:52,643 [INFO] ✅ Kullanıcı (ID: 75) gruba (ID: 124) başarıyla eklendi.
2025-08-20 20:54:52,644 [INFO] [Row 1] ➕ Kullanıcı (ID=75) gruba eklendi (GroupID=124)
2025-08-20 20:54:52,645 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-20 20:54:52,656 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-20 20:54:52,656 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-20 20:54:52,657 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:52,892 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-20 20:54:52,893 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-20 20:54:52,894 [INFO] Row 2: Managed System oluşturuldu.
2025-08-20 20:54:52,897 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,046 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:53,047 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-20 20:54:53,049 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,122 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/314/LinkedAccounts/179 HTTP/1.1" 201 1123
2025-08-20 20:54:53,123 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 314, AccountID: 179
2025-08-20 20:54:53,124 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-20 20:54:53,126 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,227 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10103/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:53,229 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-20 20:54:53,230 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:179).
2025-08-20 20:54:53,230 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 124)
2025-08-20 20:54:53,231 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,280 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/124/SmartRules HTTP/1.1" 200 285
2025-08-20 20:54:53,282 [INFO] Row 2: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-20 20:54:53,283 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=124
2025-08-20 20:54:53,283 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-20 20:54:53,283 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-20 20:54:53,283 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 75
2025-08-20 20:54:53,284 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,327 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/75/UserGroups/124 HTTP/1.1" 201 271
2025-08-20 20:54:53,328 [INFO] ✅ Kullanıcı (ID: 75) gruba (ID: 124) başarıyla eklendi.
2025-08-20 20:54:53,329 [INFO] [Row 2] ➕ Kullanıcı (ID=75) gruba eklendi (GroupID=124)
2025-08-20 20:54:53,330 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-20 20:54:53,341 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-20 20:54:53,341 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-20 20:54:53,342 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,516 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1018
2025-08-20 20:54:53,517 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-20 20:54:53,518 [INFO] Row 3: Managed System oluşturuldu.
2025-08-20 20:54:53,519 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,606 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:53,607 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-20 20:54:53,609 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,673 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/315/LinkedAccounts/179 HTTP/1.1" 201 1123
2025-08-20 20:54:53,674 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 315, AccountID: 179
2025-08-20 20:54:53,675 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-20 20:54:53,677 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,744 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10103/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:53,745 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-20 20:54:53,746 [INFO] 🚀 Application atama başlatıldı. (AccountID: 179)
2025-08-20 20:54:53,747 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,799 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/179/Applications HTTP/1.1" 200 453
2025-08-20 20:54:53,800 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-20 20:54:53,801 [INFO] 📦 App atama özeti (AccountID:179) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-20 20:54:53,801 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-20 20:54:53,801 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 124)
2025-08-20 20:54:53,802 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,872 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/124/SmartRules HTTP/1.1" 200 285
2025-08-20 20:54:53,873 [INFO] Row 3: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-20 20:54:53,874 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=124
2025-08-20 20:54:53,874 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-20 20:54:53,874 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-20 20:54:53,874 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 75
2025-08-20 20:54:53,875 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:53,921 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/75/UserGroups/124 HTTP/1.1" 201 271
2025-08-20 20:54:53,921 [INFO] ✅ Kullanıcı (ID: 75) gruba (ID: 124) başarıyla eklendi.
2025-08-20 20:54:53,923 [INFO] [Row 3] ➕ Kullanıcı (ID=75) gruba eklendi (GroupID=124)
2025-08-20 20:54:53,925 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-20 20:54:53,938 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-20 20:54:53,939 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-20 20:54:53,940 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,145 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-20 20:54:54,146 [INFO] Row 4: MSSQL Managed System oluşturuldu: None
2025-08-20 20:54:54,147 [INFO] Row 4: Managed System oluşturuldu.
2025-08-20 20:54:54,148 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,233 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:54,235 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-20 20:54:54,236 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,296 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/316/LinkedAccounts/179 HTTP/1.1" 201 1123
2025-08-20 20:54:54,296 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 316, AccountID: 179
2025-08-20 20:54:54,297 [INFO] Row 1: MSSQL managed account oluşturuldu: pam118064
2025-08-20 20:54:54,300 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,364 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10103/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:54,366 [INFO] Row 4: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-20 20:54:54,367 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:179).
2025-08-20 20:54:54,367 [INFO] [Row 4] ✅ User group zaten mevcut: S_OZCAN (ID: 124)
2025-08-20 20:54:54,368 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,420 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/124/SmartRules HTTP/1.1" 200 285
2025-08-20 20:54:54,422 [INFO] Row 4: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-20 20:54:54,423 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=124
2025-08-20 20:54:54,423 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-20 20:54:54,423 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-20 20:54:54,423 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 75
2025-08-20 20:54:54,424 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,469 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/75/UserGroups/124 HTTP/1.1" 201 271
2025-08-20 20:54:54,469 [INFO] ✅ Kullanıcı (ID: 75) gruba (ID: 124) başarıyla eklendi.
2025-08-20 20:54:54,470 [INFO] [Row 4] ➕ Kullanıcı (ID=75) gruba eklendi (GroupID=124)
2025-08-20 20:54:54,471 [INFO] Row 4: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-20 20:54:54,483 [DEBUG] [FA Lookup] Aranan → Domain: 'thynet.thy.com', OS: 'mssql'
2025-08-20 20:54:54,483 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-20 20:54:54,485 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,643 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-20 20:54:54,645 [INFO] Row 5: MSSQL Managed System oluşturuldu: None
2025-08-20 20:54:54,645 [INFO] Row 5: Managed System oluşturuldu.
2025-08-20 20:54:54,646 [ERROR] [MSSQLManagedAccount] Kod: 1 Message: [MSSQLManagedAccount] Kod: -423 Message: Domain controller bulunamadı. Domain: thynet.thy.com
2025-08-20 20:54:54,646 [ERROR] [Dispatcher] Kod: 1 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-20 20:54:54,659 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-20 20:54:54,659 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-20 20:54:54,660 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,819 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-20 20:54:54,821 [INFO] Row 6: Managed System oluşturuldu: None
2025-08-20 20:54:54,821 [INFO] Row 6: Managed System oluşturuldu.
2025-08-20 20:54:54,823 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:54,909 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-20 20:54:54,912 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,102 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-20 20:54:55,102 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-20 20:54:55,103 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-20 20:54:55,104 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,159 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/318/LinkedAccounts/180 HTTP/1.1" 201 1122
2025-08-20 20:54:55,159 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 318, AccountID: 180
2025-08-20 20:54:55,160 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-20 20:54:55,162 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,241 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 275
2025-08-20 20:54:55,241 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-20 20:54:55,242 [INFO] Row 6: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-20 20:54:55,244 [INFO] Row 6: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:180).
2025-08-20 20:54:55,244 [INFO] [Row 6] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 123)
2025-08-20 20:54:55,245 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,291 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/123/SmartRules HTTP/1.1" 200 2
2025-08-20 20:54:55,294 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,340 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/123/SmartRules HTTP/1.1" 200 2
2025-08-20 20:54:55,342 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-20 20:54:55,409 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/123/SmartRules/10104/Roles HTTP/1.1" 400 63
2025-08-20 20:54:55,409 [ERROR] [UserGroupRole] Kod: 6 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/123/SmartRules/10104/Roles
2025-08-20 20:54:55,411 [INFO] Row 6: User group mevcut ve SR/Role ataması tamam: Y_UCUNCUOGLU (ok)
2025-08-20 20:54:55,412 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=123
2025-08-20 20:54:55,412 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-20 20:54:55,412 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: []
2025-08-20 20:54:55,412 [INFO] [Row 6] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-20 20:54:55,424 [DEBUG] [FA Lookup] Aranan → Domain: '', OS: 'linux'
2025-08-20 20:54:55,424 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-20 20:54:55,424 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: '', OS: 'linux'
2025-08-20 20:54:55,424 [ERROR] [LinuxHandler] Kod: 7 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-20 20:54:55,424 [ERROR] [Dispatcher] Kod: 7 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-20 20:54:55,424 [ERROR] [ManagedAccountDispatcher] Kod: 2 Message: [ManagedAccountDispatcher] Kod: -199 Message: Dispatcher exception: 'float' object has no attribute 'lower'
