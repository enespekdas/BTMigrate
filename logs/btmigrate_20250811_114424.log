2025-08-11 11:44:24,780 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250811_114424.log
2025-08-11 11:44:24,781 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250811_114424.log
2025-08-11 11:44:24,782 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:24,885 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-11 11:44:24,886 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 11:44:24,886 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-11 11:44:24,888 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:24,981 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-11 11:44:24,981 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-11 11:44:24,982 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-11 11:44:24,983 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,022 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8875
2025-08-11 11:44:25,024 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-11 11:44:25,025 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,047 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-11 11:44:25,048 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 11:44:25,049 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-11 11:44:25,050 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,077 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 1939
2025-08-11 11:44:25,078 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-11 11:44:25,079 [INFO] ✅ UserGroup cache yüklendi. (6 kayıt)
2025-08-11 11:44:25,080 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,119 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2450
2025-08-11 11:44:25,120 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (7 kayıt)
2025-08-11 11:44:25,120 [INFO] ✅ User cache yüklendi. (7 kayıt)
2025-08-11 11:44:25,121 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-11 11:44:25,128 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-11 11:44:25,140 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 11:44:25,141 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 11:44:25,142 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,287 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 11:44:25,288 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-11 11:44:25,289 [INFO] Row 1: Managed System oluşturuldu.
2025-08-11 11:44:25,290 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,477 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:44:25,479 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,606 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-11 11:44:25,606 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-11 11:44:25,607 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:44:25,608 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,652 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/275/LinkedAccounts/161 HTTP/1.1" 201 1123
2025-08-11 11:44:25,652 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 275, AccountID: 161
2025-08-11 11:44:25,654 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:44:25,655 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,714 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 11:44:25,714 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 11:44:25,716 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 11:44:25,717 [INFO] 🚀 Application atama başlatıldı. (AccountID: 161)
2025-08-11 11:44:25,718 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,750 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/161/Applications HTTP/1.1" 200 2
2025-08-11 11:44:25,753 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,783 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/161/Applications/4 HTTP/1.1" 201 451
2025-08-11 11:44:25,784 [INFO] ✅ ApplicationID 4 → ManagedAccountID 161 ataması başarılı.
2025-08-11 11:44:25,785 [INFO] 📦 App atama özeti (AccountID:161) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:44:25,786 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:44:25,786 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10089, 'AccessLevelID': 3}]}
2025-08-11 11:44:25,786 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-11 11:44:25,787 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,884 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-11 11:44:25,885 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 114, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-11 11:44:25,885 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 114)
2025-08-11 11:44:25,887 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:25,959 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/114/SmartRules/10089/Roles HTTP/1.1" 204 0
2025-08-11 11:44:25,959 [INFO] [Row 1] ✅ SmartRule Role ataması başarılı → GroupID=114, RuleID=10089
2025-08-11 11:44:25,960 [INFO] Row 1: User group oluşturuldu ve SR/Role atandı: S_OZCAN
2025-08-11 11:44:25,961 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=114
2025-08-11 11:44:25,961 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:44:25,961 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:44:25,962 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,200 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-11 11:44:26,201 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 64)
2025-08-11 11:44:26,202 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 64)
2025-08-11 11:44:26,203 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,244 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/64/UserGroups/114 HTTP/1.1" 201 271
2025-08-11 11:44:26,244 [INFO] ✅ Kullanıcı (ID: 64) gruba (ID: 114) başarıyla eklendi.
2025-08-11 11:44:26,245 [INFO] [Row 1] ➕ Kullanıcı (ID=64) gruba eklendi (GroupID=114)
2025-08-11 11:44:26,246 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:44:26,256 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 11:44:26,256 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 11:44:26,257 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,424 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-11 11:44:26,426 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-11 11:44:26,426 [INFO] Row 2: Managed System oluşturuldu.
2025-08-11 11:44:26,428 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,534 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-11 11:44:26,535 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 11:44:26,536 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,580 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/276/LinkedAccounts/161 HTTP/1.1" 201 1123
2025-08-11 11:44:26,580 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 276, AccountID: 161
2025-08-11 11:44:26,581 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:44:26,583 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,659 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10089/ManagedAccounts HTTP/1.1" 200 1125
2025-08-11 11:44:26,660 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 11:44:26,661 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:161).
2025-08-11 11:44:26,661 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 114)
2025-08-11 11:44:26,662 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,759 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/114/SmartRules/10089/Roles HTTP/1.1" 204 0
2025-08-11 11:44:26,760 [INFO] [Row 2] ✅ SmartRule Role ataması başarılı → GroupID=114, RuleID=10089
2025-08-11 11:44:26,761 [INFO] Row 2: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 11:44:26,762 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=114
2025-08-11 11:44:26,762 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:44:26,762 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:44:26,762 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 64
2025-08-11 11:44:26,763 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,792 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/64/UserGroups/114 HTTP/1.1" 201 271
2025-08-11 11:44:26,792 [INFO] ✅ Kullanıcı (ID: 64) gruba (ID: 114) başarıyla eklendi.
2025-08-11 11:44:26,793 [INFO] [Row 2] ➕ Kullanıcı (ID=64) gruba eklendi (GroupID=114)
2025-08-11 11:44:26,794 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:44:26,803 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 11:44:26,803 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 11:44:26,804 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:26,933 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 11:44:26,934 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-11 11:44:26,935 [INFO] Row 3: Managed System oluşturuldu.
2025-08-11 11:44:26,936 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,023 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-11 11:44:27,024 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 11:44:27,025 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,068 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/277/LinkedAccounts/161 HTTP/1.1" 201 1123
2025-08-11 11:44:27,069 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 277, AccountID: 161
2025-08-11 11:44:27,070 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:44:27,072 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,114 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10089/ManagedAccounts HTTP/1.1" 200 1125
2025-08-11 11:44:27,116 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 11:44:27,117 [INFO] 🚀 Application atama başlatıldı. (AccountID: 161)
2025-08-11 11:44:27,117 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,145 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/161/Applications HTTP/1.1" 200 453
2025-08-11 11:44:27,146 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-11 11:44:27,147 [INFO] 📦 App atama özeti (AccountID:161) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 11:44:27,147 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:44:27,147 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 114)
2025-08-11 11:44:27,148 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,197 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/114/SmartRules/10089/Roles HTTP/1.1" 204 0
2025-08-11 11:44:27,197 [INFO] [Row 3] ✅ SmartRule Role ataması başarılı → GroupID=114, RuleID=10089
2025-08-11 11:44:27,199 [INFO] Row 3: User group mevcut ve SR/Role ataması yapıldı: S_OZCAN
2025-08-11 11:44:27,200 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=114
2025-08-11 11:44:27,200 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:44:27,200 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:44:27,200 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 64
2025-08-11 11:44:27,200 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,226 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/64/UserGroups/114 HTTP/1.1" 201 271
2025-08-11 11:44:27,226 [INFO] ✅ Kullanıcı (ID: 64) gruba (ID: 114) başarıyla eklendi.
2025-08-11 11:44:27,227 [INFO] [Row 3] ➕ Kullanıcı (ID=64) gruba eklendi (GroupID=114)
2025-08-11 11:44:27,229 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:44:27,239 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 11:44:27,239 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 11:44:27,240 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,366 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1023
2025-08-11 11:44:27,367 [INFO] Row 4: Managed System oluşturuldu: None
2025-08-11 11:44:27,367 [INFO] Row 4: Managed System oluşturuldu.
2025-08-11 11:44:27,368 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,432 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-11 11:44:27,435 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,555 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-11 11:44:27,555 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-11 11:44:27,556 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 11:44:27,558 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,596 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/278/LinkedAccounts/162 HTTP/1.1" 201 1123
2025-08-11 11:44:27,596 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 278, AccountID: 162
2025-08-11 11:44:27,597 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 11:44:27,599 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,649 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 274
2025-08-11 11:44:27,649 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 11:44:27,650 [INFO] Row 4: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 11:44:27,652 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:162).
2025-08-11 11:44:27,652 [INFO] [Row 4] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 11:44:27,653 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,681 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10090/Roles HTTP/1.1" 400 63
2025-08-11 11:44:27,682 [ERROR] [UserGroupRole] Kod: 4 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10090/Roles
2025-08-11 11:44:27,683 [ERROR] [UserGroup] Kod: 4 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10090/Roles
2025-08-11 11:44:27,684 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 11:44:27,684 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:44:27,684 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: []
2025-08-11 11:44:27,684 [INFO] [Row 4] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:44:27,694 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'linux'
2025-08-11 11:44:27,694 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-11 11:44:27,694 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: 'nondomain', OS: 'linux'
2025-08-11 11:44:27,694 [ERROR] [LinuxHandler] Kod: 5 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-11 11:44:27,694 [ERROR] [Dispatcher] Kod: 5 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:44:27,694 [ERROR] [ADManagedAccount] Kod: 2 Message: [ADManagedAccount] Kod: -300 Message: Domain controller bulunamadı. Domain: nondomain
2025-08-11 11:44:27,694 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -101 Message: AD managed account oluşturulamadı (ID yok).
2025-08-11 11:44:27,708 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 11:44:27,708 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 11:44:27,708 [ERROR] [MssqlHandler] Kod: 6 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz: nan
2025-08-11 11:44:27,709 [ERROR] [Dispatcher] Kod: 6 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:44:27,709 [ERROR] [MSSQLManagedAccount] Kod: 2 Message: [MSSQLManagedAccount] Kod: -410 Message: Port değeri geçersiz: nan
2025-08-11 11:44:27,709 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-11 11:44:27,725 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 11:44:27,725 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 11:44:27,725 [ERROR] [MssqlHandler] Kod: 7 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz: nan
2025-08-11 11:44:27,725 [ERROR] [Dispatcher] Kod: 7 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:44:27,725 [ERROR] [MSSQLManagedAccount] Kod: 2 Message: [MSSQLManagedAccount] Kod: -410 Message: Port değeri geçersiz: nan
2025-08-11 11:44:27,726 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-11 11:44:27,741 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 11:44:27,741 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 11:44:27,741 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 11:44:27,742 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,864 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1075
2025-08-11 11:44:27,865 [INFO] Row 8: Oracle Managed System oluşturuldu: None
2025-08-11 11:44:27,866 [INFO] Row 8: Managed System oluşturuldu.
2025-08-11 11:44:27,867 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:27,966 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/279/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:44:27,968 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,107 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/279/ManagedAccounts HTTP/1.1" 201 1101
2025-08-11 11:44:28,108 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100545
2025-08-11 11:44:28,109 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 11:44:28,109 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 11:44:28,111 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,191 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 11:44:28,192 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_MISIR
2025-08-11 11:44:28,193 [INFO] Row 8: Smart Rule oluşturuldu: THY_MA_E_MISIR
2025-08-11 11:44:28,193 [INFO] 🚀 Application atama başlatıldı. (AccountID: 163)
2025-08-11 11:44:28,194 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,223 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/163/Applications HTTP/1.1" 200 2
2025-08-11 11:44:28,226 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,256 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/163/Applications/6 HTTP/1.1" 201 285
2025-08-11 11:44:28,256 [INFO] ✅ ApplicationID 6 → ManagedAccountID 163 ataması başarılı.
2025-08-11 11:44:28,257 [INFO] 📦 App atama özeti (AccountID:163) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:44:28,257 [INFO] Row 8: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:44:28,258 [INFO] [Row 8] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 11:44:28,258 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,286 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles HTTP/1.1" 400 63
2025-08-11 11:44:28,286 [ERROR] [UserGroupRole] Kod: 8 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles
2025-08-11 11:44:28,287 [ERROR] [UserGroup] Kod: 8 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles
2025-08-11 11:44:28,288 [DEBUG] [DEBUG] Row 8: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 11:44:28,288 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:44:28,288 [DEBUG] [DEBUG] Row 8: 🧪 Normalize üyeler: []
2025-08-11 11:44:28,288 [INFO] [Row 8] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:44:28,301 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 11:44:28,301 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 11:44:28,301 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 11:44:28,302 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,425 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1077
2025-08-11 11:44:28,426 [INFO] Row 9: Oracle Managed System oluşturuldu: None
2025-08-11 11:44:28,427 [INFO] Row 9: Managed System oluşturuldu.
2025-08-11 11:44:28,428 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,520 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/280/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:44:28,522 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,638 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/280/ManagedAccounts HTTP/1.1" 201 1101
2025-08-11 11:44:28,639 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100546
2025-08-11 11:44:28,640 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 11:44:28,640 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 11:44:28,642 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,719 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10091/ManagedAccounts HTTP/1.1" 200 1103
2025-08-11 11:44:28,722 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,883 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10091/ManagedAccounts HTTP/1.1" 200 2205
2025-08-11 11:44:28,884 [INFO] [SmartRuleAPI] ✅ SmartRule güncellendi. ID=10091, AccountIDs=[163, 164]
2025-08-11 11:44:28,885 [INFO] Row 9: Smart Rule güncellendi (hesap eklendi): THY_MA_E_MISIR
2025-08-11 11:44:28,887 [INFO] 🚀 Application atama başlatıldı. (AccountID: 164)
2025-08-11 11:44:28,888 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:28,925 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/164/Applications HTTP/1.1" 200 2
2025-08-11 11:44:28,927 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:29,050 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/164/Applications/6 HTTP/1.1" 201 285
2025-08-11 11:44:29,050 [INFO] ✅ ApplicationID 6 → ManagedAccountID 164 ataması başarılı.
2025-08-11 11:44:29,051 [INFO] 📦 App atama özeti (AccountID:164) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:44:29,052 [INFO] Row 9: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:44:29,052 [INFO] [Row 9] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 11:44:29,053 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:44:29,088 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles HTTP/1.1" 400 63
2025-08-11 11:44:29,088 [ERROR] [UserGroupRole] Kod: 9 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles
2025-08-11 11:44:29,090 [ERROR] [UserGroup] Kod: 9 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10091/Roles
2025-08-11 11:44:29,090 [DEBUG] [DEBUG] Row 9: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 11:44:29,091 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:44:29,091 [DEBUG] [DEBUG] Row 9: 🧪 Normalize üyeler: []
2025-08-11 11:44:29,091 [INFO] [Row 9] ℹ️ User group'a eklenecek kullanıcı yok.
