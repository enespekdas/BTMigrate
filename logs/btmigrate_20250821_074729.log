2025-08-21 07:47:29,199 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250821_074729.log
2025-08-21 07:47:29,199 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250821_074729.log
2025-08-21 07:47:29,200 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,294 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-21 07:47:29,295 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-21 07:47:29,296 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-21 07:47:29,297 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,401 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-21 07:47:29,401 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-21 07:47:29,402 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-21 07:47:29,404 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,458 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8866
2025-08-21 07:47:29,460 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-21 07:47:29,461 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,496 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-21 07:47:29,497 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-21 07:47:29,498 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-21 07:47:29,499 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,554 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 1951
2025-08-21 07:47:29,554 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (6 kayıt)
2025-08-21 07:47:29,555 [INFO] ✅ UserGroup cache yüklendi. (6 kayıt)
2025-08-21 07:47:29,556 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,608 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2819
2025-08-21 07:47:29,608 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (8 kayıt)
2025-08-21 07:47:29,609 [INFO] ✅ User cache yüklendi. (8 kayıt)
2025-08-21 07:47:29,610 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-21 07:47:29,617 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-21 07:47:29,626 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-21 07:47:29,626 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-21 07:47:29,627 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,777 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-21 07:47:29,779 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-21 07:47:29,779 [INFO] Row 1: Managed System oluşturuldu.
2025-08-21 07:47:29,781 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,861 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-21 07:47:29,863 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:29,997 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1123
2025-08-21 07:47:29,997 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-21 07:47:29,998 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:47:29,999 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,056 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/337/LinkedAccounts/187 HTTP/1.1" 201 1123
2025-08-21 07:47:30,056 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 337, AccountID: 187
2025-08-21 07:47:30,057 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:47:30,059 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,134 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-21 07:47:30,135 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-21 07:47:30,136 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-21 07:47:30,137 [INFO] 🚀 Application atama başlatıldı. (AccountID: 187)
2025-08-21 07:47:30,139 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,181 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/187/Applications HTTP/1.1" 200 2
2025-08-21 07:47:30,183 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,228 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/187/Applications/4 HTTP/1.1" 201 451
2025-08-21 07:47:30,228 [INFO] ✅ ApplicationID 4 → ManagedAccountID 187 ataması başarılı.
2025-08-21 07:47:30,229 [INFO] 📦 App atama özeti (AccountID:187) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-21 07:47:30,229 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-21 07:47:30,229 [DEBUG] [Row 1] 🧱 User group oluşturma payload: {'groupType': 'BeyondInsight', 'groupName': 'S_OZCAN', 'description': 'S_OZCAN', 'isActive': True, 'Permissions': [{'PermissionID': 52, 'AccessLevelID': 1}, {'PermissionID': 76, 'AccessLevelID': 3}, {'PermissionID': 77, 'AccessLevelID': 1}], 'SmartRuleAccess': [{'SmartRuleID': 10111, 'AccessLevelID': 3}]}
2025-08-21 07:47:30,229 [INFO] [Row 1] 🚀 Yeni user group oluşturuluyor: S_OZCAN
2025-08-21 07:47:30,230 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,332 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 201 271
2025-08-21 07:47:30,333 [INFO] 🧪 [DEBUG] UserGroup API response: {'GroupID': 130, 'GroupType': 'BeyondInsight', 'IsActive': True, 'Name': 'S_OZCAN', 'DistinguishedName': None, 'Description': 'S_OZCAN', 'ExcludedFromGlobalSync': False, 'OverrideGlobalSyncSettings': False, 'MembershipAttribute': None, 'AccountAttribute': None, 'BaseDistinguishedName': None}
2025-08-21 07:47:30,333 [INFO] ✅ User group oluşturuldu: S_OZCAN (ID: 130)
2025-08-21 07:47:30,335 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,381 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:30,383 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,427 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:30,428 [INFO] [Row 1] ✅ SR/Role zaten atanmış → GroupID=130, RuleID=10111
2025-08-21 07:47:30,428 [INFO] Row 1: User group oluşturuldu ve SR/Role garanti altına alındı: S_OZCAN (SR/Role zaten atanmış)
2025-08-21 07:47:30,429 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=130
2025-08-21 07:47:30,429 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:47:30,429 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:47:30,430 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,529 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-21 07:47:30,530 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 79)
2025-08-21 07:47:30,531 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 79)
2025-08-21 07:47:30,532 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,582 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/79/UserGroups/130 HTTP/1.1" 201 271
2025-08-21 07:47:30,582 [INFO] ✅ Kullanıcı (ID: 79) gruba (ID: 130) başarıyla eklendi.
2025-08-21 07:47:30,583 [INFO] [Row 1] ➕ Kullanıcı (ID=79) gruba eklendi (GroupID=130)
2025-08-21 07:47:30,584 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:47:30,594 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-21 07:47:30,594 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-21 07:47:30,595 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,733 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-21 07:47:30,734 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-21 07:47:30,734 [INFO] Row 2: Managed System oluşturuldu.
2025-08-21 07:47:30,736 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,816 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:30,818 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:47:30,819 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,876 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/338/LinkedAccounts/187 HTTP/1.1" 201 1123
2025-08-21 07:47:30,876 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 338, AccountID: 187
2025-08-21 07:47:30,877 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:47:30,879 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:30,970 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10111/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:30,971 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:47:30,972 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:187).
2025-08-21 07:47:30,973 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 130)
2025-08-21 07:47:30,973 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,016 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:31,018 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,064 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:31,066 [INFO] [Row 2] ✅ SR/Role zaten atanmış → GroupID=130, RuleID=10111
2025-08-21 07:47:31,066 [INFO] Row 2: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-21 07:47:31,067 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=130
2025-08-21 07:47:31,067 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:47:31,067 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:47:31,067 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 79
2025-08-21 07:47:31,068 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,106 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/79/UserGroups/130 HTTP/1.1" 201 271
2025-08-21 07:47:31,107 [INFO] ✅ Kullanıcı (ID: 79) gruba (ID: 130) başarıyla eklendi.
2025-08-21 07:47:31,108 [INFO] [Row 2] ➕ Kullanıcı (ID=79) gruba eklendi (GroupID=130)
2025-08-21 07:47:31,108 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:47:31,120 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-21 07:47:31,120 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-21 07:47:31,121 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,278 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1018
2025-08-21 07:47:31,280 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-21 07:47:31,280 [INFO] Row 3: Managed System oluşturuldu.
2025-08-21 07:47:31,282 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,359 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:31,360 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:47:31,362 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,417 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/339/LinkedAccounts/187 HTTP/1.1" 201 1123
2025-08-21 07:47:31,418 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 339, AccountID: 187
2025-08-21 07:47:31,419 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-21 07:47:31,420 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,478 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10111/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:31,480 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:47:31,481 [INFO] 🚀 Application atama başlatıldı. (AccountID: 187)
2025-08-21 07:47:31,482 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,523 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/187/Applications HTTP/1.1" 200 453
2025-08-21 07:47:31,524 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-21 07:47:31,525 [INFO] 📦 App atama özeti (AccountID:187) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-21 07:47:31,525 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-21 07:47:31,525 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 130)
2025-08-21 07:47:31,526 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,582 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:31,584 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,625 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:31,626 [INFO] [Row 3] ✅ SR/Role zaten atanmış → GroupID=130, RuleID=10111
2025-08-21 07:47:31,627 [INFO] Row 3: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-21 07:47:31,627 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=130
2025-08-21 07:47:31,627 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:47:31,627 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:47:31,627 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 79
2025-08-21 07:47:31,628 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,669 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/79/UserGroups/130 HTTP/1.1" 201 271
2025-08-21 07:47:31,670 [INFO] ✅ Kullanıcı (ID: 79) gruba (ID: 130) başarıyla eklendi.
2025-08-21 07:47:31,671 [INFO] [Row 3] ➕ Kullanıcı (ID=79) gruba eklendi (GroupID=130)
2025-08-21 07:47:31,672 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:47:31,683 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-21 07:47:31,683 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-21 07:47:31,684 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,827 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-21 07:47:31,828 [INFO] Row 4: MSSQL Managed System oluşturuldu: None
2025-08-21 07:47:31,828 [INFO] Row 4: Managed System oluşturuldu.
2025-08-21 07:47:31,830 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,910 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:31,911 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-21 07:47:31,913 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:31,987 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/340/LinkedAccounts/187 HTTP/1.1" 201 1123
2025-08-21 07:47:31,988 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 340, AccountID: 187
2025-08-21 07:47:31,989 [INFO] Row 1: MSSQL managed account oluşturuldu: pam118064
2025-08-21 07:47:31,991 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,051 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10111/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:32,053 [INFO] Row 4: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-21 07:47:32,054 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:187).
2025-08-21 07:47:32,054 [INFO] [Row 4] ✅ User group zaten mevcut: S_OZCAN (ID: 130)
2025-08-21 07:47:32,055 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,101 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:32,103 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,145 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/130/SmartRules HTTP/1.1" 200 285
2025-08-21 07:47:32,146 [INFO] [Row 4] ✅ SR/Role zaten atanmış → GroupID=130, RuleID=10111
2025-08-21 07:47:32,147 [INFO] Row 4: User group mevcut ve SR/Role ataması tamam: S_OZCAN (SR/Role zaten atanmış)
2025-08-21 07:47:32,148 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=130
2025-08-21 07:47:32,148 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-21 07:47:32,148 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-21 07:47:32,148 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 79
2025-08-21 07:47:32,149 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,188 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/79/UserGroups/130 HTTP/1.1" 201 271
2025-08-21 07:47:32,189 [INFO] ✅ Kullanıcı (ID: 79) gruba (ID: 130) başarıyla eklendi.
2025-08-21 07:47:32,190 [INFO] [Row 4] ➕ Kullanıcı (ID=79) gruba eklendi (GroupID=130)
2025-08-21 07:47:32,192 [INFO] Row 4: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-21 07:47:32,207 [DEBUG] [FA Lookup] Aranan → Domain: 'thynet.thy.com', OS: 'mssql'
2025-08-21 07:47:32,207 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-21 07:47:32,208 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,338 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1128
2025-08-21 07:47:32,340 [INFO] Row 5: MSSQL Managed System oluşturuldu: None
2025-08-21 07:47:32,340 [INFO] Row 5: Managed System oluşturuldu.
2025-08-21 07:47:32,341 [ERROR] [MSSQLManagedAccount] Kod: 1 Message: [MSSQLManagedAccount] Kod: -423 Message: Domain controller bulunamadı. Domain: thynet.thy.com
2025-08-21 07:47:32,341 [ERROR] [Dispatcher] Kod: 1 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-21 07:47:32,353 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-21 07:47:32,353 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-21 07:47:32,354 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,489 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-21 07:47:32,491 [INFO] Row 6: Managed System oluşturuldu: None
2025-08-21 07:47:32,491 [INFO] Row 6: Managed System oluşturuldu.
2025-08-21 07:47:32,492 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,569 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1125
2025-08-21 07:47:32,571 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,709 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-21 07:47:32,710 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-21 07:47:32,711 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-21 07:47:32,712 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,770 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/342/LinkedAccounts/188 HTTP/1.1" 201 1122
2025-08-21 07:47:32,771 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 342, AccountID: 188
2025-08-21 07:47:32,772 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-21 07:47:32,773 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,841 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 274
2025-08-21 07:47:32,842 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-21 07:47:32,843 [INFO] Row 6: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-21 07:47:32,844 [INFO] Row 6: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:188).
2025-08-21 07:47:32,844 [INFO] [Row 6] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 128)
2025-08-21 07:47:32,845 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,890 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/128/SmartRules HTTP/1.1" 200 2
2025-08-21 07:47:32,892 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,936 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups/128/SmartRules HTTP/1.1" 200 2
2025-08-21 07:47:32,939 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-21 07:47:32,978 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/128/SmartRules/10112/Roles HTTP/1.1" 400 63
2025-08-21 07:47:32,979 [ERROR] [UserGroupRole] Kod: 6 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/128/SmartRules/10112/Roles
2025-08-21 07:47:32,979 [INFO] Row 6: User group mevcut ve SR/Role ataması tamam: Y_UCUNCUOGLU (ok)
2025-08-21 07:47:32,980 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=128
2025-08-21 07:47:32,980 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-21 07:47:32,980 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: []
2025-08-21 07:47:32,981 [INFO] [Row 6] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-21 07:47:32,993 [DEBUG] [FA Lookup] Aranan → Domain: '', OS: 'linux'
2025-08-21 07:47:32,994 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-21 07:47:32,994 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: '', OS: 'linux'
2025-08-21 07:47:32,994 [ERROR] [LinuxHandler] Kod: 7 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-21 07:47:32,994 [ERROR] [Dispatcher] Kod: 7 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-21 07:47:32,994 [ERROR] [ManagedAccountDispatcher] Kod: 2 Message: [ManagedAccountDispatcher] Kod: -199 Message: Dispatcher exception: 'float' object has no attribute 'lower'
