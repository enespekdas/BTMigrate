2025-08-11 11:39:22,002 [INFO] 🚀 Loglama başlatıldı: logs/btmigrate_20250811_113922.log
2025-08-11 11:39:22,002 [INFO] 🚨 Hatalar ayrıca burada: logs/btmigrate_error_20250811_113922.log
2025-08-11 11:39:22,004 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,106 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems HTTP/1.1" 200 4096
2025-08-11 11:39:22,106 [INFO] 📥 Managed System listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 11:39:22,107 [INFO] ✅ ManagedSystem cache yüklendi. (4 kayıt)
2025-08-11 11:39:22,108 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,212 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/FunctionalAccounts HTTP/1.1" 200 2315
2025-08-11 11:39:22,213 [INFO] 📥 FunctionalAccount listesi API'den alındı ve cache'e yazıldı. (9 kayıt)
2025-08-11 11:39:22,214 [INFO] ✅ FunctionalAccount cache yüklendi. (9 kayıt)
2025-08-11 11:39:22,215 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,256 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/SmartRules HTTP/1.1" 200 8873
2025-08-11 11:39:22,257 [INFO] ✅ SmartRule cache yüklendi. (30 kayıt)
2025-08-11 11:39:22,259 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,285 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Applications HTTP/1.1" 200 1645
2025-08-11 11:39:22,286 [INFO] 📥 Application listesi API'den alındı ve cache'e yazıldı. (4 kayıt)
2025-08-11 11:39:22,287 [INFO] ✅ Application cache yüklendi. (4 kayıt)
2025-08-11 11:39:22,288 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,321 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/UserGroups HTTP/1.1" 200 2258
2025-08-11 11:39:22,322 [INFO] 📥 User group listesi API'den alındı ve cache'e yazıldı. (7 kayıt)
2025-08-11 11:39:22,323 [INFO] ✅ UserGroup cache yüklendi. (7 kayıt)
2025-08-11 11:39:22,324 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,363 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/Users HTTP/1.1" 200 2450
2025-08-11 11:39:22,364 [INFO] 📥 User listesi API'den alındı ve cache'e yazıldı. (7 kayıt)
2025-08-11 11:39:22,365 [INFO] ✅ User cache yüklendi. (7 kayıt)
2025-08-11 11:39:22,365 [INFO] 🧹 Var olan output dosyası silindi: data/btmigrate_output.xlsx
2025-08-11 11:39:22,373 [INFO] ✅ Output Excel dosyası oluşturuldu: data/btmigrate_output.xlsx
2025-08-11 11:39:22,384 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 11:39:22,385 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 11:39:22,386 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,574 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 11:39:22,577 [INFO] Row 1: Linux Managed System oluşturuldu: None
2025-08-11 11:39:22,578 [INFO] Row 1: Managed System oluşturuldu.
2025-08-11 11:39:22,579 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,650 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:39:22,653 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,782 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-11 11:39:22,783 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam118064
2025-08-11 11:39:22,784 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:39:22,785 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,834 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/269/LinkedAccounts/157 HTTP/1.1" 201 1122
2025-08-11 11:39:22,835 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 269, AccountID: 157
2025-08-11 11:39:22,836 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:39:22,838 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,894 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 11:39:22,895 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 11:39:22,896 [INFO] Row 1: Smart Rule oluşturuldu: THY_MA_S_OZCAN
2025-08-11 11:39:22,896 [INFO] 🚀 Application atama başlatıldı. (AccountID: 157)
2025-08-11 11:39:22,897 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,927 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/157/Applications HTTP/1.1" 200 2
2025-08-11 11:39:22,929 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,964 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/157/Applications/4 HTTP/1.1" 201 451
2025-08-11 11:39:22,964 [INFO] ✅ ApplicationID 4 → ManagedAccountID 157 ataması başarılı.
2025-08-11 11:39:22,965 [INFO] 📦 App atama özeti (AccountID:157) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:39:22,965 [INFO] Row 1: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:39:22,966 [INFO] [Row 1] ✅ User group zaten mevcut: S_OZCAN (ID: 113)
2025-08-11 11:39:22,967 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:22,998 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles HTTP/1.1" 400 63
2025-08-11 11:39:22,998 [ERROR] [UserGroupRole] Kod: 1 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:22,999 [ERROR] [UserGroup] Kod: 1 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:23,000 [DEBUG] [DEBUG] Row 1: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=113
2025-08-11 11:39:23,001 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:39:23,001 [DEBUG] [DEBUG] Row 1: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:39:23,002 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,344 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/ HTTP/1.1" 201 213
2025-08-11 11:39:23,345 [INFO] ✅ Kullanıcı oluşturuldu: s_ozcan (ID: 63)
2025-08-11 11:39:23,345 [INFO] ✅ Yeni kullanıcı cache'e eklendi: s_ozcan (ID: 63)
2025-08-11 11:39:23,347 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,384 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/63/UserGroups/113 HTTP/1.1" 201 271
2025-08-11 11:39:23,385 [INFO] ✅ Kullanıcı (ID: 63) gruba (ID: 113) başarıyla eklendi.
2025-08-11 11:39:23,386 [INFO] [Row 1] ➕ Kullanıcı (ID=63) gruba eklendi (GroupID=113)
2025-08-11 11:39:23,387 [INFO] Row 1: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:39:23,396 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 11:39:23,396 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 11:39:23,397 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,569 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1008
2025-08-11 11:39:23,570 [INFO] Row 2: Managed System oluşturuldu: None
2025-08-11 11:39:23,570 [INFO] Row 2: Managed System oluşturuldu.
2025-08-11 11:39:23,572 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,640 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 11:39:23,641 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 11:39:23,643 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,692 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/270/LinkedAccounts/157 HTTP/1.1" 201 1122
2025-08-11 11:39:23,692 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 270, AccountID: 157
2025-08-11 11:39:23,693 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:39:23,696 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,786 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10086/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 11:39:23,788 [INFO] Row 2: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 11:39:23,789 [INFO] Row 2: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:157).
2025-08-11 11:39:23,789 [INFO] [Row 2] ✅ User group zaten mevcut: S_OZCAN (ID: 113)
2025-08-11 11:39:23,790 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,818 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles HTTP/1.1" 400 63
2025-08-11 11:39:23,819 [ERROR] [UserGroupRole] Kod: 2 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:23,820 [ERROR] [UserGroup] Kod: 2 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:23,821 [DEBUG] [DEBUG] Row 2: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=113
2025-08-11 11:39:23,821 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:39:23,821 [DEBUG] [DEBUG] Row 2: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:39:23,821 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 63
2025-08-11 11:39:23,822 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:23,852 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/63/UserGroups/113 HTTP/1.1" 201 271
2025-08-11 11:39:23,852 [INFO] ✅ Kullanıcı (ID: 63) gruba (ID: 113) başarıyla eklendi.
2025-08-11 11:39:23,853 [INFO] [Row 2] ➕ Kullanıcı (ID=63) gruba eklendi (GroupID=113)
2025-08-11 11:39:23,854 [INFO] Row 2: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:39:23,863 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'linux'
2025-08-11 11:39:23,863 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 5
2025-08-11 11:39:23,864 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,023 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1003
2025-08-11 11:39:24,024 [INFO] Row 3: Linux Managed System oluşturuldu: None
2025-08-11 11:39:24,025 [INFO] Row 3: Managed System oluşturuldu.
2025-08-11 11:39:24,026 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,097 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 11:39:24,098 [INFO] Row 1: AD managed account zaten var: pam118064
2025-08-11 11:39:24,099 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,145 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/271/LinkedAccounts/157 HTTP/1.1" 201 1122
2025-08-11 11:39:24,145 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 271, AccountID: 157
2025-08-11 11:39:24,146 [INFO] Row 1: AD managed account oluşturuldu: pam118064
2025-08-11 11:39:24,148 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,207 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10086/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 11:39:24,208 [INFO] Row 3: Smart Rule zaten mevcut ve hesap bağlı: THY_MA_S_OZCAN
2025-08-11 11:39:24,210 [INFO] 🚀 Application atama başlatıldı. (AccountID: 157)
2025-08-11 11:39:24,211 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,269 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/157/Applications HTTP/1.1" 200 453
2025-08-11 11:39:24,270 [INFO] ℹ️ Application 'winscp' zaten atanmış, atlama yapıldı.
2025-08-11 11:39:24,270 [INFO] 📦 App atama özeti (AccountID:157) → İstenen:1, Atanan:0, Zaten:1, Bulunamadı:0, Başarısız:0
2025-08-11 11:39:24,271 [INFO] Row 3: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:39:24,271 [INFO] [Row 3] ✅ User group zaten mevcut: S_OZCAN (ID: 113)
2025-08-11 11:39:24,272 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,301 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles HTTP/1.1" 400 63
2025-08-11 11:39:24,301 [ERROR] [UserGroupRole] Kod: 3 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:24,302 [ERROR] [UserGroup] Kod: 3 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/113/SmartRules/10086/Roles
2025-08-11 11:39:24,303 [DEBUG] [DEBUG] Row 3: ➡️ Girdi üyeleri: S_OZCAN (Tip: <class 'str'>) → GroupID=113
2025-08-11 11:39:24,303 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'str'>, Değer: S_OZCAN
2025-08-11 11:39:24,303 [DEBUG] [DEBUG] Row 3: 🧪 Normalize üyeler: ['s_ozcan']
2025-08-11 11:39:24,303 [DEBUG] [DEBUG] Row -1: 🧪 Cache'te bulundu: s_ozcan → ID: 63
2025-08-11 11:39:24,304 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,355 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Users/63/UserGroups/113 HTTP/1.1" 201 271
2025-08-11 11:39:24,355 [INFO] ✅ Kullanıcı (ID: 63) gruba (ID: 113) başarıyla eklendi.
2025-08-11 11:39:24,357 [INFO] [Row 3] ➕ Kullanıcı (ID=63) gruba eklendi (GroupID=113)
2025-08-11 11:39:24,358 [INFO] Row 3: 1 kullanıcı işlendi, tamamı gruba eklendi.
2025-08-11 11:39:24,376 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'windows'
2025-08-11 11:39:24,377 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 4
2025-08-11 11:39:24,379 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,528 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1023
2025-08-11 11:39:24,529 [INFO] Row 4: Managed System oluşturuldu: None
2025-08-11 11:39:24,530 [INFO] Row 4: Managed System oluşturuldu.
2025-08-11 11:39:24,531 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,610 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 200 1124
2025-08-11 11:39:24,612 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,751 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/2/ManagedAccounts HTTP/1.1" 201 1122
2025-08-11 11:39:24,751 [INFO] [ManagedAccountAPI] ✅ AD Managed Account oluşturuldu: pam100887
2025-08-11 11:39:24,752 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 11:39:24,754 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,798 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/272/LinkedAccounts/158 HTTP/1.1" 201 1122
2025-08-11 11:39:24,798 [INFO] [ManagedAccountAPI] 🔗 Linkleme başarılı → SystemID: 272, AccountID: 158
2025-08-11 11:39:24,799 [INFO] Row 2: AD managed account oluşturuldu: pam100887
2025-08-11 11:39:24,801 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,865 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 275
2025-08-11 11:39:24,866 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 11:39:24,867 [INFO] Row 4: Smart Rule oluşturuldu: THY_MA_Y_UCUNCUOGLU
2025-08-11 11:39:24,868 [INFO] Row 4: Application alanı boş/uygunsuz; atama yapılmayacak (AccountID:158).
2025-08-11 11:39:24,868 [INFO] [Row 4] ✅ User group zaten mevcut: Y_UCUNCUOGLU (ID: 108)
2025-08-11 11:39:24,869 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:24,897 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10087/Roles HTTP/1.1" 400 63
2025-08-11 11:39:24,898 [ERROR] [UserGroupRole] Kod: 4 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10087/Roles
2025-08-11 11:39:24,899 [ERROR] [UserGroup] Kod: 4 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/108/SmartRules/10087/Roles
2025-08-11 11:39:24,901 [DEBUG] [DEBUG] Row 4: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 11:39:24,901 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:24,901 [DEBUG] [DEBUG] Row 4: 🧪 Normalize üyeler: []
2025-08-11 11:39:24,901 [INFO] [Row 4] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:39:24,956 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'linux'
2025-08-11 11:39:24,957 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('linux') ile fallback denenecek.
2025-08-11 11:39:24,957 [DEBUG] [FA Lookup] (Fallback) Eşleşme bulunamadı. Domain: 'nondomain', OS: 'linux'
2025-08-11 11:39:24,957 [ERROR] [LinuxHandler] Kod: 5 Message: [LinuxHandler] Kod: -200 Message: Functional Account ID bulunamadı.
2025-08-11 11:39:24,957 [ERROR] [Dispatcher] Kod: 5 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:39:24,957 [ERROR] [ADManagedAccount] Kod: 2 Message: [ADManagedAccount] Kod: -300 Message: Domain controller bulunamadı. Domain: nondomain
2025-08-11 11:39:24,957 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -101 Message: AD managed account oluşturulamadı (ID yok).
2025-08-11 11:39:24,957 [DEBUG] [DEBUG] Row 5: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 11:39:24,957 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:24,957 [DEBUG] [DEBUG] Row 5: 🧪 Normalize üyeler: []
2025-08-11 11:39:24,957 [INFO] [Row 5] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:39:24,969 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 11:39:24,969 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 11:39:24,969 [ERROR] [MssqlHandler] Kod: 6 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz: nan
2025-08-11 11:39:24,969 [ERROR] [Dispatcher] Kod: 6 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:39:24,969 [ERROR] [MSSQLManagedAccount] Kod: 2 Message: [MSSQLManagedAccount] Kod: -410 Message: Port değeri geçersiz: nan
2025-08-11 11:39:24,969 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-11 11:39:24,969 [DEBUG] [DEBUG] Row 6: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 11:39:24,969 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:24,969 [DEBUG] [DEBUG] Row 6: 🧪 Normalize üyeler: []
2025-08-11 11:39:24,969 [INFO] [Row 6] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:39:24,981 [DEBUG] [FA Lookup] Aranan → Domain: 'quasys.local', OS: 'mssql'
2025-08-11 11:39:24,981 [DEBUG] [FA Lookup] Eşleşen FA bulundu → ID: 9
2025-08-11 11:39:24,981 [ERROR] [MssqlHandler] Kod: 7 Message: [MssqlHandler] Kod: -202 Message: Port değeri geçersiz: nan
2025-08-11 11:39:24,981 [ERROR] [Dispatcher] Kod: 7 Message: [Dispatcher] Kod: -101 Message: Oluşturma başarısız (ID dönmedi).
2025-08-11 11:39:24,981 [ERROR] [MSSQLManagedAccount] Kod: 2 Message: [MSSQLManagedAccount] Kod: -410 Message: Port değeri geçersiz: nan
2025-08-11 11:39:24,981 [ERROR] [Dispatcher] Kod: 2 Message: [Dispatcher] Kod: -103 Message: MSSQL managed account oluşturulamadı (ID yok).
2025-08-11 11:39:24,981 [DEBUG] [DEBUG] Row 7: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=108
2025-08-11 11:39:24,981 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:24,981 [DEBUG] [DEBUG] Row 7: 🧪 Normalize üyeler: []
2025-08-11 11:39:24,981 [INFO] [Row 7] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:39:24,993 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 11:39:24,993 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 11:39:24,993 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 11:39:24,994 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,136 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1075
2025-08-11 11:39:25,137 [INFO] Row 8: Oracle Managed System oluşturuldu: None
2025-08-11 11:39:25,138 [INFO] Row 8: Managed System oluşturuldu.
2025-08-11 11:39:25,139 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,253 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/273/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:39:25,255 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,398 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/273/ManagedAccounts HTTP/1.1" 201 1100
2025-08-11 11:39:25,399 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100545
2025-08-11 11:39:25,401 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 11:39:25,402 [INFO] Row 3: Oracle managed account oluşturuldu: PAM100545
2025-08-11 11:39:25,406 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,541 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/QuickRules HTTP/1.1" 201 265
2025-08-11 11:39:25,541 [INFO] [SmartRuleAPI] ✅ SmartRule oluşturuldu: THY_MA_E_MISIR
2025-08-11 11:39:25,543 [INFO] Row 8: Smart Rule oluşturuldu: THY_MA_E_MISIR
2025-08-11 11:39:25,544 [INFO] 🚀 Application atama başlatıldı. (AccountID: 159)
2025-08-11 11:39:25,545 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,598 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/159/Applications HTTP/1.1" 200 2
2025-08-11 11:39:25,601 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,633 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/159/Applications/6 HTTP/1.1" 201 285
2025-08-11 11:39:25,633 [INFO] ✅ ApplicationID 6 → ManagedAccountID 159 ataması başarılı.
2025-08-11 11:39:25,634 [INFO] 📦 App atama özeti (AccountID:159) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:39:25,635 [INFO] Row 8: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:39:25,635 [INFO] [Row 8] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 11:39:25,635 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,665 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles HTTP/1.1" 400 63
2025-08-11 11:39:25,665 [ERROR] [UserGroupRole] Kod: 8 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles
2025-08-11 11:39:25,667 [ERROR] [UserGroup] Kod: 8 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles
2025-08-11 11:39:25,667 [DEBUG] [DEBUG] Row 8: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 11:39:25,667 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:25,668 [DEBUG] [DEBUG] Row 8: 🧪 Normalize üyeler: []
2025-08-11 11:39:25,668 [INFO] [Row 8] ℹ️ User group'a eklenecek kullanıcı yok.
2025-08-11 11:39:25,680 [DEBUG] [FA Lookup] Aranan → Domain: 'nondomain', OS: 'oracle'
2025-08-11 11:39:25,680 [DEBUG] [FA Lookup] Domain eşleşmedi. Sadece OS ('oracle') ile fallback denenecek.
2025-08-11 11:39:25,680 [DEBUG] [FA Lookup] (Fallback) OS'e göre FA bulundu → ID: 8
2025-08-11 11:39:25,681 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,829 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/Workgroups/2/ManagedSystems HTTP/1.1" 201 1077
2025-08-11 11:39:25,831 [INFO] Row 9: Oracle Managed System oluşturuldu: None
2025-08-11 11:39:25,831 [INFO] Row 9: Managed System oluşturuldu.
2025-08-11 11:39:25,832 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:25,964 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedSystems/274/ManagedAccounts HTTP/1.1" 200 2
2025-08-11 11:39:25,967 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,094 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedSystems/274/ManagedAccounts HTTP/1.1" 201 1101
2025-08-11 11:39:26,094 [INFO] ✅ Oracle Managed Account oluşturuldu: PAM100546
2025-08-11 11:39:26,095 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 11:39:26,096 [INFO] Row 4: Oracle managed account oluşturuldu: PAM100546
2025-08-11 11:39:26,097 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,182 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/QuickRules/10088/ManagedAccounts HTTP/1.1" 200 1102
2025-08-11 11:39:26,185 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,297 [DEBUG] https://bt.quasys.local:443 "PUT /BeyondTrust/api/public/v3/QuickRules/10088/ManagedAccounts HTTP/1.1" 200 2204
2025-08-11 11:39:26,298 [INFO] [SmartRuleAPI] ✅ SmartRule güncellendi. ID=10088, AccountIDs=[160, 159]
2025-08-11 11:39:26,299 [INFO] Row 9: Smart Rule güncellendi (hesap eklendi): THY_MA_E_MISIR
2025-08-11 11:39:26,300 [INFO] 🚀 Application atama başlatıldı. (AccountID: 160)
2025-08-11 11:39:26,301 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,330 [DEBUG] https://bt.quasys.local:443 "GET /BeyondTrust/api/public/v3/ManagedAccounts/160/Applications HTTP/1.1" 200 2
2025-08-11 11:39:26,333 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,397 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/ManagedAccounts/160/Applications/6 HTTP/1.1" 201 285
2025-08-11 11:39:26,397 [INFO] ✅ ApplicationID 6 → ManagedAccountID 160 ataması başarılı.
2025-08-11 11:39:26,398 [INFO] 📦 App atama özeti (AccountID:160) → İstenen:1, Atanan:1, Zaten:0, Bulunamadı:0, Başarısız:0
2025-08-11 11:39:26,398 [INFO] Row 9: Tüm uygulamalar başarıyla atandı veya önceden atanmış.
2025-08-11 11:39:26,399 [INFO] [Row 9] ✅ User group zaten mevcut: E_MISIR (ID: 109)
2025-08-11 11:39:26,399 [DEBUG] Starting new HTTPS connection (1): bt.quasys.local:443
2025-08-11 11:39:26,428 [DEBUG] https://bt.quasys.local:443 "POST /BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles HTTP/1.1" 400 63
2025-08-11 11:39:26,429 [ERROR] [UserGroupRole] Kod: 9 Message: ❌ SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles
2025-08-11 11:39:26,430 [ERROR] [UserGroup] Kod: 9 Message: [UserGroup] Kod: -861 Message: SmartRule/Role ataması başarısız: SmartRule Role atama hatası: 400 Client Error: Bad Request for url: https://bt.quasys.local/BeyondTrust/api/public/v3/UserGroups/109/SmartRules/10088/Roles
2025-08-11 11:39:26,431 [DEBUG] [DEBUG] Row 9: ➡️ Girdi üyeleri: nan (Tip: <class 'float'>) → GroupID=109
2025-08-11 11:39:26,431 [DEBUG] [DEBUG] Row -1: 🧪 parse_member_field() → Tip: <class 'float'>, Değer: nan
2025-08-11 11:39:26,432 [DEBUG] [DEBUG] Row 9: 🧪 Normalize üyeler: []
2025-08-11 11:39:26,432 [INFO] [Row 9] ℹ️ User group'a eklenecek kullanıcı yok.
